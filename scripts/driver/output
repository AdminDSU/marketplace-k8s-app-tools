name: myapp
namespace: mynamespace
reportingSecret: reportingSecret
serviceAccount.name: kasten-sa
.
Client Version: version.Info{Major:"1", Minor:"9", GitVersion:"v1.9.7", GitCommit:"dd5e1a2978fd0b97d9b78e1564398aeea7e7fe92", GitTreeState:"clean", BuildDate:"2018-04-19T00:05:56Z", GoVersion:"go1.9.3", Compiler:"gc", Platform:"linux/amd64"}
Server Version: version.Info{Major:"1", Minor:"8+", GitVersion:"v1.8.10-gke.0", GitCommit:"16ebd0de8e0ab2d1ef86d5b16ab1899b624a77cd", GitTreeState:"clean", BuildDate:"2018-03-20T20:21:01Z", GoVersion:"go1.8.3b4", Compiler:"gc", Platform:"linux/amd64"}
INFO Creates namespace "apptest-80129e39"
namespace "apptest-80129e39" created
INFO Parameters: {
  "name": "kasten-k10-1",
  "reportingSecret": "reportingSecret",
  "namespace": "apptest-80129e39"
}
INFO Initializes the deployer container which will deploy all the application components
application "kasten-k10-1" created
serviceaccount "kasten-k10-1-serviceaccount.name-7664" created
clusterrolebinding "apptest-80129e39:kasten-k10-1:serviceAccount.name:cluster-admin-rb" created
serviceaccount "kasten-k10-1-deployer-sa" created
rolebinding "kasten-k10-1-deployer-rb" created
configmap "kasten-k10-1-deployer-config" created
job "kasten-k10-1-deployer" created
INFO wait for the deployer to succeed
Elapsed 0sElapsed 4sElapsed 8sERROR Deployer failed
INFO Collecting events for namespace "apptest-80129e39"
LAST SEEN   FIRST SEEN   COUNT     NAME                                                               KIND                    SUBOBJECT                   TYPE      REASON                  SOURCE                                        MESSAGE
6s          6s           1         ambassador-7c5db5686c.153e04fb26ed9f8d                             ReplicaSet                                          Warning   FailedCreate            replicaset-controller                         Error creating: Pod "ambassador-7c5db5686c-qns8b" is invalid: [spec.volumes[0].name: Invalid value: "kasten-k10-1-serviceaccount.name-7664-token-dlt27": a DNS-1123 label must consist of lower case alphanumeric characters or '-', and must start and end with an alphanumeric character (e.g. 'my-name',  or '123-abc', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?'), spec.containers[0].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27", spec.containers[1].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27"]
6s          6s           1         ambassador-7c5db5686c.153e04fb287e2112                             ReplicaSet                                          Warning   FailedCreate            replicaset-controller                         Error creating: Pod "ambassador-7c5db5686c-tdss9" is invalid: [spec.volumes[0].name: Invalid value: "kasten-k10-1-serviceaccount.name-7664-token-dlt27": a DNS-1123 label must consist of lower case alphanumeric characters or '-', and must start and end with an alphanumeric character (e.g. 'my-name',  or '123-abc', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?'), spec.containers[0].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27", spec.containers[1].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27"]
6s          6s           1         ambassador-7c5db5686c.153e04fb2941c6eb                             ReplicaSet                                          Warning   FailedCreate            replicaset-controller                         Error creating: Pod "ambassador-7c5db5686c-xzcdq" is invalid: [spec.volumes[0].name: Invalid value: "kasten-k10-1-serviceaccount.name-7664-token-dlt27": a DNS-1123 label must consist of lower case alphanumeric characters or '-', and must start and end with an alphanumeric character (e.g. 'my-name',  or '123-abc', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?'), spec.containers[0].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27", spec.containers[1].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27"]
6s          6s           1         ambassador-7c5db5686c.153e04fb29e22f08                             ReplicaSet                                          Warning   FailedCreate            replicaset-controller                         Error creating: Pod "ambassador-7c5db5686c-6djv8" is invalid: [spec.volumes[0].name: Invalid value: "kasten-k10-1-serviceaccount.name-7664-token-dlt27": a DNS-1123 label must consist of lower case alphanumeric characters or '-', and must start and end with an alphanumeric character (e.g. 'my-name',  or '123-abc', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?'), spec.containers[0].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27", spec.containers[1].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27"]
6s          6s           1         ambassador-7c5db5686c.153e04fb2ab6073f                             ReplicaSet                                          Warning   FailedCreate            replicaset-controller                         Error creating: Pod "ambassador-7c5db5686c-g7stg" is invalid: [spec.volumes[0].name: Invalid value: "kasten-k10-1-serviceaccount.name-7664-token-dlt27": a DNS-1123 label must consist of lower case alphanumeric characters or '-', and must start and end with an alphanumeric character (e.g. 'my-name',  or '123-abc', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?'), spec.containers[0].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27", spec.containers[1].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27"]
6s          6s           1         ambassador-7c5db5686c.153e04fb2fb94e4b                             ReplicaSet                                          Warning   FailedCreate            replicaset-controller                         Error creating: Pod "ambassador-7c5db5686c-zw65d" is invalid: [spec.volumes[0].name: Invalid value: "kasten-k10-1-serviceaccount.name-7664-token-dlt27": a DNS-1123 label must consist of lower case alphanumeric characters or '-', and must start and end with an alphanumeric character (e.g. 'my-name',  or '123-abc', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?'), spec.containers[0].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27", spec.containers[1].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27"]
6s          6s           1         ambassador-7c5db5686c.153e04fb3a305ae7                             ReplicaSet                                          Warning   FailedCreate            replicaset-controller                         Error creating: Pod "ambassador-7c5db5686c-jp6d9" is invalid: [spec.volumes[0].name: Invalid value: "kasten-k10-1-serviceaccount.name-7664-token-dlt27": a DNS-1123 label must consist of lower case alphanumeric characters or '-', and must start and end with an alphanumeric character (e.g. 'my-name',  or '123-abc', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?'), spec.containers[0].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27", spec.containers[1].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27"]
6s          6s           1         ambassador-7c5db5686c.153e04fb4dead951                             ReplicaSet                                          Warning   FailedCreate            replicaset-controller                         Error creating: Pod "ambassador-7c5db5686c-znrjn" is invalid: [spec.volumes[0].name: Invalid value: "kasten-k10-1-serviceaccount.name-7664-token-dlt27": a DNS-1123 label must consist of lower case alphanumeric characters or '-', and must start and end with an alphanumeric character (e.g. 'my-name',  or '123-abc', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?'), spec.containers[0].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27", spec.containers[1].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27"]
6s          6s           1         ambassador.153e04fb2665f25d                                        Deployment                                          Normal    ScalingReplicaSet       deployment-controller                         Scaled up replica set ambassador-7c5db5686c to 1
6s          6s           1         api-policies-svc-6dc86d8cc7.153e04fb496f01ba                       ReplicaSet                                          Warning   FailedCreate            replicaset-controller                         Error creating: Pod "api-policies-svc-6dc86d8cc7-62j2p" is invalid: [spec.volumes[0].name: Invalid value: "kasten-k10-1-serviceaccount.name-7664-token-dlt27": a DNS-1123 label must consist of lower case alphanumeric characters or '-', and must start and end with an alphanumeric character (e.g. 'my-name',  or '123-abc', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?'), spec.containers[0].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27", spec.containers[1].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27"]
6s          6s           1         api-policies-svc-6dc86d8cc7.153e04fb4b9c99da                       ReplicaSet                                          Warning   FailedCreate            replicaset-controller                         Error creating: Pod "api-policies-svc-6dc86d8cc7-lq8d4" is invalid: [spec.volumes[0].name: Invalid value: "kasten-k10-1-serviceaccount.name-7664-token-dlt27": a DNS-1123 label must consist of lower case alphanumeric characters or '-', and must start and end with an alphanumeric character (e.g. 'my-name',  or '123-abc', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?'), spec.containers[0].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27", spec.containers[1].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27"]
6s          6s           1         api-policies-svc-6dc86d8cc7.153e04fb4c3bab96                       ReplicaSet                                          Warning   FailedCreate            replicaset-controller                         Error creating: Pod "api-policies-svc-6dc86d8cc7-6xbmx" is invalid: [spec.volumes[0].name: Invalid value: "kasten-k10-1-serviceaccount.name-7664-token-dlt27": a DNS-1123 label must consist of lower case alphanumeric characters or '-', and must start and end with an alphanumeric character (e.g. 'my-name',  or '123-abc', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?'), spec.containers[0].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27", spec.containers[1].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27"]
6s          6s           1         api-policies-svc-6dc86d8cc7.153e04fb4d0f2ede                       ReplicaSet                                          Warning   FailedCreate            replicaset-controller                         Error creating: Pod "api-policies-svc-6dc86d8cc7-486gp" is invalid: [spec.volumes[0].name: Invalid value: "kasten-k10-1-serviceaccount.name-7664-token-dlt27": a DNS-1123 label must consist of lower case alphanumeric characters or '-', and must start and end with an alphanumeric character (e.g. 'my-name',  or '123-abc', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?'), spec.containers[0].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27", spec.containers[1].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27"]
6s          6s           1         api-policies-svc-6dc86d8cc7.153e04fb502d9157                       ReplicaSet                                          Warning   FailedCreate            replicaset-controller                         Error creating: Pod "api-policies-svc-6dc86d8cc7-ng7sh" is invalid: [spec.volumes[0].name: Invalid value: "kasten-k10-1-serviceaccount.name-7664-token-dlt27": a DNS-1123 label must consist of lower case alphanumeric characters or '-', and must start and end with an alphanumeric character (e.g. 'my-name',  or '123-abc', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?'), spec.containers[0].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27", spec.containers[1].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27"]
6s          6s           1         api-policies-svc-6dc86d8cc7.153e04fb5b21d44a                       ReplicaSet                                          Warning   FailedCreate            replicaset-controller                         Error creating: Pod "api-policies-svc-6dc86d8cc7-tnmwk" is invalid: [spec.volumes[0].name: Invalid value: "kasten-k10-1-serviceaccount.name-7664-token-dlt27": a DNS-1123 label must consist of lower case alphanumeric characters or '-', and must start and end with an alphanumeric character (e.g. 'my-name',  or '123-abc', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?'), spec.containers[0].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27", spec.containers[1].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27"]
5s          5s           1         api-policies-svc-6dc86d8cc7.153e04fb7f081e25                       ReplicaSet                                          Warning   FailedCreate            replicaset-controller                         Error creating: Pod "api-policies-svc-6dc86d8cc7-nlsmq" is invalid: [spec.volumes[0].name: Invalid value: "kasten-k10-1-serviceaccount.name-7664-token-dlt27": a DNS-1123 label must consist of lower case alphanumeric characters or '-', and must start and end with an alphanumeric character (e.g. 'my-name',  or '123-abc', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?'), spec.containers[0].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27", spec.containers[1].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27"]
6s          6s           1         api-policies-svc.153e04fb49681a74                                  Deployment                                          Normal    ScalingReplicaSet       deployment-controller                         Scaled up replica set api-policies-svc-6dc86d8cc7 to 1
6s          6s           1         api-profiles-svc-68d8b9f465.153e04fb4d650c9f                       ReplicaSet                                          Warning   FailedCreate            replicaset-controller                         Error creating: Pod "api-profiles-svc-68d8b9f465-d6bpw" is invalid: [spec.volumes[0].name: Invalid value: "kasten-k10-1-serviceaccount.name-7664-token-dlt27": a DNS-1123 label must consist of lower case alphanumeric characters or '-', and must start and end with an alphanumeric character (e.g. 'my-name',  or '123-abc', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?'), spec.containers[0].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27", spec.containers[1].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27"]
6s          6s           1         api-profiles-svc-68d8b9f465.153e04fb4ece82fc                       ReplicaSet                                          Warning   FailedCreate            replicaset-controller                         Error creating: Pod "api-profiles-svc-68d8b9f465-74scb" is invalid: [spec.volumes[0].name: Invalid value: "kasten-k10-1-serviceaccount.name-7664-token-dlt27": a DNS-1123 label must consist of lower case alphanumeric characters or '-', and must start and end with an alphanumeric character (e.g. 'my-name',  or '123-abc', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?'), spec.containers[0].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27", spec.containers[1].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27"]
6s          6s           1         api-profiles-svc-68d8b9f465.153e04fb4f8c47f3                       ReplicaSet                                          Warning   FailedCreate            replicaset-controller                         Error creating: Pod "api-profiles-svc-68d8b9f465-dt7nf" is invalid: [spec.volumes[0].name: Invalid value: "kasten-k10-1-serviceaccount.name-7664-token-dlt27": a DNS-1123 label must consist of lower case alphanumeric characters or '-', and must start and end with an alphanumeric character (e.g. 'my-name',  or '123-abc', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?'), spec.containers[0].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27", spec.containers[1].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27"]
6s          6s           1         api-profiles-svc-68d8b9f465.153e04fb5172655e                       ReplicaSet                                          Warning   FailedCreate            replicaset-controller                         Error creating: Pod "api-profiles-svc-68d8b9f465-cjkbq" is invalid: [spec.volumes[0].name: Invalid value: "kasten-k10-1-serviceaccount.name-7664-token-dlt27": a DNS-1123 label must consist of lower case alphanumeric characters or '-', and must start and end with an alphanumeric character (e.g. 'my-name',  or '123-abc', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?'), spec.containers[0].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27", spec.containers[1].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27"]
6s          6s           1         api-profiles-svc-68d8b9f465.153e04fb557c5e90                       ReplicaSet                                          Warning   FailedCreate            replicaset-controller                         Error creating: Pod "api-profiles-svc-68d8b9f465-njnvs" is invalid: [spec.volumes[0].name: Invalid value: "kasten-k10-1-serviceaccount.name-7664-token-dlt27": a DNS-1123 label must consist of lower case alphanumeric characters or '-', and must start and end with an alphanumeric character (e.g. 'my-name',  or '123-abc', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?'), spec.containers[0].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27", spec.containers[1].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27"]
5s          5s           1         api-profiles-svc-68d8b9f465.153e04fb6d5544da                       ReplicaSet                                          Warning   FailedCreate            replicaset-controller                         Error creating: Pod "api-profiles-svc-68d8b9f465-kbv79" is invalid: [spec.volumes[0].name: Invalid value: "kasten-k10-1-serviceaccount.name-7664-token-dlt27": a DNS-1123 label must consist of lower case alphanumeric characters or '-', and must start and end with an alphanumeric character (e.g. 'my-name',  or '123-abc', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?'), spec.containers[0].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27", spec.containers[1].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27"]
6s          6s           1         api-profiles-svc.153e04fb4d4a1d42                                  Deployment                                          Normal    ScalingReplicaSet       deployment-controller                         Scaled up replica set api-profiles-svc-68d8b9f465 to 1
6s          6s           1         auth-svc-646bb587d9.153e04fb50d7e043                               ReplicaSet                                          Warning   FailedCreate            replicaset-controller                         Error creating: Pod "auth-svc-646bb587d9-ddkx7" is invalid: [spec.volumes[1].name: Invalid value: "kasten-k10-1-serviceaccount.name-7664-token-dlt27": a DNS-1123 label must consist of lower case alphanumeric characters or '-', and must start and end with an alphanumeric character (e.g. 'my-name',  or '123-abc', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?'), spec.containers[0].volumeMounts[1].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27", spec.containers[1].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27"]
6s          6s           1         auth-svc-646bb587d9.153e04fb531db18b                               ReplicaSet                                          Warning   FailedCreate            replicaset-controller                         Error creating: Pod "auth-svc-646bb587d9-l46mg" is invalid: [spec.volumes[1].name: Invalid value: "kasten-k10-1-serviceaccount.name-7664-token-dlt27": a DNS-1123 label must consist of lower case alphanumeric characters or '-', and must start and end with an alphanumeric character (e.g. 'my-name',  or '123-abc', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?'), spec.containers[0].volumeMounts[1].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27", spec.containers[1].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27"]
6s          6s           1         auth-svc-646bb587d9.153e04fb53acdffc                               ReplicaSet                                          Warning   FailedCreate            replicaset-controller                         Error creating: Pod "auth-svc-646bb587d9-9szdc" is invalid: [spec.volumes[1].name: Invalid value: "kasten-k10-1-serviceaccount.name-7664-token-dlt27": a DNS-1123 label must consist of lower case alphanumeric characters or '-', and must start and end with an alphanumeric character (e.g. 'my-name',  or '123-abc', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?'), spec.containers[0].volumeMounts[1].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27", spec.containers[1].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27"]
6s          6s           1         auth-svc-646bb587d9.153e04fb5436220c                               ReplicaSet                                          Warning   FailedCreate            replicaset-controller                         Error creating: Pod "auth-svc-646bb587d9-z8c8t" is invalid: [spec.volumes[1].name: Invalid value: "kasten-k10-1-serviceaccount.name-7664-token-dlt27": a DNS-1123 label must consist of lower case alphanumeric characters or '-', and must start and end with an alphanumeric character (e.g. 'my-name',  or '123-abc', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?'), spec.containers[0].volumeMounts[1].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27", spec.containers[1].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27"]
5s          5s           1         auth-svc-646bb587d9.153e04fb614ee25f                               ReplicaSet                                          Warning   FailedCreate            replicaset-controller                         Error creating: Pod "auth-svc-646bb587d9-bmc4n" is invalid: [spec.volumes[1].name: Invalid value: "kasten-k10-1-serviceaccount.name-7664-token-dlt27": a DNS-1123 label must consist of lower case alphanumeric characters or '-', and must start and end with an alphanumeric character (e.g. 'my-name',  or '123-abc', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?'), spec.containers[0].volumeMounts[1].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27", spec.containers[1].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27"]
5s          5s           1         auth-svc-646bb587d9.153e04fb821865bd                               ReplicaSet                                          Warning   FailedCreate            replicaset-controller                         Error creating: Pod "auth-svc-646bb587d9-rntnx" is invalid: [spec.volumes[1].name: Invalid value: "kasten-k10-1-serviceaccount.name-7664-token-dlt27": a DNS-1123 label must consist of lower case alphanumeric characters or '-', and must start and end with an alphanumeric character (e.g. 'my-name',  or '123-abc', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?'), spec.containers[0].volumeMounts[1].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27", spec.containers[1].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27"]
6s          6s           1         auth-svc.153e04fb50a7ed04                                          Deployment                                          Normal    ScalingReplicaSet       deployment-controller                         Scaled up replica set auth-svc-646bb587d9 to 1
1s          1s           1         catalog-pv-claim.153e04fc6306f9e6                                  PersistentVolumeClaim                               Normal    ProvisioningSucceeded   persistentvolume-controller                   Successfully provisioned volume pvc-82688c93-7f26-11e8-a573-42010a8a01a6 using kubernetes.io/gce-pd
5s          5s           1         catalog-svc-bc79968f9.153e04fb5e2f23c1                             ReplicaSet                                          Warning   FailedCreate            replicaset-controller                         Error creating: Pod "catalog-svc-bc79968f9-49fg9" is invalid: [spec.volumes[1].name: Invalid value: "kasten-k10-1-serviceaccount.name-7664-token-dlt27": a DNS-1123 label must consist of lower case alphanumeric characters or '-', and must start and end with an alphanumeric character (e.g. 'my-name',  or '123-abc', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?'), spec.containers[0].volumeMounts[1].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27", spec.containers[1].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27"]
6s          6s           1         catalog-svc.153e04fb554b6f87                                       Deployment                                          Normal    ScalingReplicaSet       deployment-controller                         Scaled up replica set catalog-svc-bc79968f9 to 1
5s          5s           1         compliance-svc-5799f5f9cc.153e04fb6418ff6e                         ReplicaSet                                          Warning   FailedCreate            replicaset-controller                         Error creating: Pod "compliance-svc-5799f5f9cc-sfw8r" is invalid: [spec.volumes[0].name: Invalid value: "kasten-k10-1-serviceaccount.name-7664-token-dlt27": a DNS-1123 label must consist of lower case alphanumeric characters or '-', and must start and end with an alphanumeric character (e.g. 'my-name',  or '123-abc', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?'), spec.containers[0].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27", spec.containers[1].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27"]
6s          6s           1         compliance-svc.153e04fb573f1584                                    Deployment                                          Normal    ScalingReplicaSet       deployment-controller                         Scaled up replica set compliance-svc-5799f5f9cc to 1
1s          1s           1         credentials-pv-claim.153e04fc5f26d343                              PersistentVolumeClaim                               Normal    ProvisioningSucceeded   persistentvolume-controller                   Successfully provisioned volume pvc-8276af41-7f26-11e8-a573-42010a8a01a6 using kubernetes.io/gce-pd
5s          5s           1         credentials-svc-7d47c4796d.153e04fb6a5a4d28                        ReplicaSet                                          Warning   FailedCreate            replicaset-controller                         Error creating: Pod "credentials-svc-7d47c4796d-wk88c" is invalid: [spec.volumes[1].name: Invalid value: "kasten-k10-1-serviceaccount.name-7664-token-dlt27": a DNS-1123 label must consist of lower case alphanumeric characters or '-', and must start and end with an alphanumeric character (e.g. 'my-name',  or '123-abc', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?'), spec.containers[0].volumeMounts[1].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27", spec.containers[1].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27"]
6s          6s           1         credentials-svc.153e04fb59c81f03                                   Deployment                                          Normal    ScalingReplicaSet       deployment-controller                         Scaled up replica set credentials-svc-7d47c4796d to 1
4s          4s           1         dashboardbff-svc.153e04fba5c8cce1                                  Deployment                                          Normal    ScalingReplicaSet       deployment-controller                         Scaled up replica set dashboardbff-svc-59c66555cf to 1
5s          5s           1         executor-svc-d87445c5c.153e04fb72f22edc                            ReplicaSet                                          Warning   FailedCreate            replicaset-controller                         Error creating: Pod "executor-svc-d87445c5c-9xc97" is invalid: [spec.volumes[0].name: Invalid value: "kasten-k10-1-serviceaccount.name-7664-token-dlt27": a DNS-1123 label must consist of lower case alphanumeric characters or '-', and must start and end with an alphanumeric character (e.g. 'my-name',  or '123-abc', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?'), spec.containers[0].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27", spec.containers[1].volumeMounts[0].name: Not found: "kasten-k10-1-serviceaccount.name-7664-token-dlt27"]
5s          5s           1         executor-svc.153e04fb61b0b4f5                                      Deployment                                          Normal    ScalingReplicaSet       deployment-controller                         Scaled up replica set executor-svc-d87445c5c to 3
3s          6s           4         fluentd-5dc5695cb9-hdrzk.153e04fb410822b8                          Pod                                                 Warning   FailedScheduling        default-scheduler                             PersistentVolumeClaim is not bound: "fluentd" (repeated 4 times)
6s          6s           1         fluentd-5dc5695cb9.153e04fb412694d4                                ReplicaSet                                          Normal    SuccessfulCreate        replicaset-controller                         Created pod: fluentd-5dc5695cb9-hdrzk
6s          6s           1         fluentd.153e04fb40580802                                           Deployment                                          Normal    ScalingReplicaSet       deployment-controller                         Scaled up replica set fluentd-5dc5695cb9 to 1
2s          2s           1         fluentd.153e04fc1e1919a1                                           PersistentVolumeClaim                               Normal    ProvisioningSucceeded   persistentvolume-controller                   Successfully provisioned volume pvc-81e360cf-7f26-11e8-a573-42010a8a01a6 using kubernetes.io/gce-pd
4s          4s           1         frontend-svc.153e04fbabbf6d01                                      Deployment                                          Normal    ScalingReplicaSet       deployment-controller                         Scaled up replica set frontend-svc-685fd6ffc5 to 1
1s          1s           1         jobs-pv-claim.153e04fc5eada0f4                                     PersistentVolumeClaim                               Normal    ProvisioningSucceeded   persistentvolume-controller                   Successfully provisioned volume pvc-82808c16-7f26-11e8-a573-42010a8a01a6 using kubernetes.io/gce-pd
5s          5s           1         jobs-svc.153e04fb6769f68e                                          Deployment                                          Normal    ScalingReplicaSet       deployment-controller                         Scaled up replica set jobs-svc-b8dc88b to 1
1s          1s           1         jobsqueue-pv-claim.153e04fc5f2827f2                                PersistentVolumeClaim                               Normal    ProvisioningSucceeded   persistentvolume-controller                   Successfully provisioned volume pvc-8284c732-7f26-11e8-a573-42010a8a01a6 using kubernetes.io/gce-pd
5s          5s           1         jobsqueue-svc.153e04fb6a95c335                                     Deployment                                          Normal    ScalingReplicaSet       deployment-controller                         Scaled up replica set jobsqueue-svc-b8494d495 to 1
4s          4s           1         kanister-svc.153e04fbd2901ba0                                      Deployment                                          Normal    ScalingReplicaSet       deployment-controller                         Scaled up replica set kanister-svc-8b9f94777 to 1
13s         13s          1         kasten-k10-1-deployer-b8stb.153e04f99801ff18                       Pod                                                 Normal    Scheduled               default-scheduler                             Successfully assigned kasten-k10-1-deployer-b8stb to gke-cluster-1-pool-1-a289a9fe-wcvw
13s         13s          1         kasten-k10-1-deployer-b8stb.153e04f99f67a367                       Pod                                                 Normal    SuccessfulMountVolume   kubelet, gke-cluster-1-pool-1-a289a9fe-wcvw   MountVolume.SetUp succeeded for volume "config-volume" 
13s         13s          1         kasten-k10-1-deployer-b8stb.153e04f9a08a925b                       Pod                                                 Normal    SuccessfulMountVolume   kubelet, gke-cluster-1-pool-1-a289a9fe-wcvw   MountVolume.SetUp succeeded for volume "kasten-k10-1-deployer-sa-token-6n5x2" 
12s         12s          1         kasten-k10-1-deployer-b8stb.153e04f9be46adfb                       Pod                     spec.containers{deployer}   Normal    Pulling                 kubelet, gke-cluster-1-pool-1-a289a9fe-wcvw   pulling image "gcr.io/ruela-test/k10/deployer:latest"
12s         12s          1         kasten-k10-1-deployer-b8stb.153e04f9f13b4dfa                       Pod                     spec.containers{deployer}   Normal    Pulled                  kubelet, gke-cluster-1-pool-1-a289a9fe-wcvw   Successfully pulled image "gcr.io/ruela-test/k10/deployer:latest"
12s         12s          1         kasten-k10-1-deployer-b8stb.153e04f9f3f0c7e4                       Pod                     spec.containers{deployer}   Normal    Created                 kubelet, gke-cluster-1-pool-1-a289a9fe-wcvw   Created container
11s         11s          1         kasten-k10-1-deployer-b8stb.153e04f9f9186d5b                       Pod                     spec.containers{deployer}   Normal    Started                 kubelet, gke-cluster-1-pool-1-a289a9fe-wcvw   Started container
13s         13s          1         kasten-k10-1-deployer.153e04f99785e230                             Job                                                 Normal    SuccessfulCreate        job-controller                                Created pod: kasten-k10-1-deployer-b8stb
4s          4s           1         kasten-k10-1-deployer.153e04fbafe9653b                             Job                                                 Warning   BackoffLimitExceeded    job-controller                                Job has reach the specified backoff limit
3s          6s           4         kasten-k10-1-prometheus-server-5dc986857f-vfzvp.153e04fb4510ee83   Pod                                                 Warning   FailedScheduling        default-scheduler                             PersistentVolumeClaim is not bound: "kasten-k10-1-prometheus-server" (repeated 4 times)
6s          6s           1         kasten-k10-1-prometheus-server-5dc986857f.153e04fb4558c190         ReplicaSet                                          Normal    SuccessfulCreate        replicaset-controller                         Created pod: kasten-k10-1-prometheus-server-5dc986857f-vfzvp
6s          6s           1         kasten-k10-1-prometheus-server.153e04fb443cd44f                    Deployment                                          Normal    ScalingReplicaSet       deployment-controller                         Scaled up replica set kasten-k10-1-prometheus-server-5dc986857f to 1
2s          2s           1         kasten-k10-1-prometheus-server.153e04fc1eea7bbb                    PersistentVolumeClaim                               Normal    ProvisioningSucceeded   persistentvolume-controller                   Successfully provisioned volume pvc-81e5b071-7f26-11e8-a573-42010a8a01a6 using kubernetes.io/gce-pd
1s          1s           1         policies-pv-claim.153e04fc528722a7                                 PersistentVolumeClaim                               Normal    ProvisioningSucceeded   persistentvolume-controller                   Successfully provisioned volume pvc-828aab71-7f26-11e8-a573-42010a8a01a6 using kubernetes.io/gce-pd
5s          5s           1         policies-svc.153e04fb6d8e7442                                      Deployment                                          Normal    ScalingReplicaSet       deployment-controller                         Scaled up replica set policies-svc-7f8fd8664 to 1
1s          1s           1         profiles-pv-claim.153e04fc64edabdd                                 PersistentVolumeClaim                               Normal    ProvisioningSucceeded   persistentvolume-controller                   Successfully provisioned volume pvc-82916f29-7f26-11e8-a573-42010a8a01a6 using kubernetes.io/gce-pd
5s          5s           1         profiles-svc.153e04fb7624ec81                                      Deployment                                          Normal    ScalingReplicaSet       deployment-controller                         Scaled up replica set profiles-svc-d6478dfdd to 1
4s          4s           1         scheduler-svc.153e04fb9cdc603a                                     Deployment                                          Normal    ScalingReplicaSet       deployment-controller                         Scaled up replica set scheduler-svc-cc8c94bc to 1
1s          1s           1         schedules-pv-claim.153e04fc665f955d                                PersistentVolumeClaim                               Normal    ProvisioningSucceeded   persistentvolume-controller                   Successfully provisioned volume pvc-8299efeb-7f26-11e8-a573-42010a8a01a6 using kubernetes.io/gce-pd
4s          4s           1         schedules-svc.153e04fba00c60d8                                     Deployment                                          Normal    ScalingReplicaSet       deployment-controller                         Scaled up replica set schedules-svc-5467c95496 to 1
1s          1s           1         state-pv-claim.153e04fc5e2c807f                                    PersistentVolumeClaim                               Normal    ProvisioningSucceeded   persistentvolume-controller                   Successfully provisioned volume pvc-829f918d-7f26-11e8-a573-42010a8a01a6 using kubernetes.io/gce-pd
4s          4s           1         state-svc.153e04fba32711a8                                         Deployment                                          Normal    ScalingReplicaSet       deployment-controller                         Scaled up replica set state-svc-6f7989b4fc to 1
INFO Collecting logs for deployer
+ overlay_test_schema.py --orig /data-test/schema.yaml --dest /data/schema.yaml
No test schema.yaml defined
+ rm -f /data-test/schema.yaml
+ /bin/expand_config.py
++ /bin/print_config.py --param '{"x-google-marketplace": {"type": "NAME"}}'
+ export NAME=kasten-k10-1
+ NAME=kasten-k10-1
++ /bin/print_config.py --param '{"x-google-marketplace": {"type": "NAMESPACE"}}'
Deploying application "kasten-k10-1" in test mode
+ export NAMESPACE=apptest-80129e39
+ NAMESPACE=apptest-80129e39
+ echo 'Deploying application "kasten-k10-1" in test mode'
++ kubectl get applications/kasten-k10-1 --namespace=apptest-80129e39 '--output=jsonpath={.metadata.uid}'
+ app_uid=7c9b0602-7f26-11e8-a573-42010a8a01a6
++ kubectl get applications/kasten-k10-1 --namespace=apptest-80129e39 '--output=jsonpath={.apiVersion}'
+ app_api_version=app.k8s.io/v1alpha1
+ create_manifests.sh --mode=test
+ for i in "$@"
+ case $i in
+ mode=test
+ shift
+ [[ -z kasten-k10-1 ]]
+ [[ -z apptest-80129e39 ]]
+ echo 'Creating the manifests for the kubernetes resources that build the application "kasten-k10-1"'
+ data_dir=/data
Creating the manifests for the kubernetes resources that build the application "kasten-k10-1"
+ manifest_dir=/data/manifest-expanded
+ mkdir -p /data/manifest-expanded
+ [[ test = \t\e\s\t ]]
+ test_data_dir=/data-test
+ mkdir -p /data-test
+ extract_manifest /data
+ data=/data
+ extracted=/data/extracted
+ mkdir -p /data/extracted
+ for chart in "$data"/chart/*
+ [[ -e /data/chart/k10.tar.gz ]]
++ basename /data/chart/k10.tar.gz
++ sed 's/.tar.gz$//'
+ chart_manifest_file=k10
+ mkdir /data/extracted/k10
+ tar xfC /data/chart/k10.tar.gz /data/extracted/k10
+ [[ test = \t\e\s\t ]]
+ extract_manifest /data-test
+ data=/data-test
+ extracted=/data-test/extracted
+ mkdir -p /data-test/extracted
+ for chart in "$data"/chart/*
+ [[ -e /data-test/chart/* ]]
+ continue
+ overlay_test_files.py --manifest /data/extracted --test_manifest /data-test/extracted
+ for chart in "$data_dir/extracted"/*
++ basename /data/extracted/k10
++ sed 's/.tar.gz$//'
+ chart_manifest_file=k10.yaml
+ helm template /data/extracted/k10/chart --name=kasten-k10-1 --namespace=apptest-80129e39 --values=/dev/fd/63
++ /bin/print_config.py --output=yaml
+ [[ test != \t\e\s\t ]]
+ process_helm_hooks.py --deploy_tests --manifest /data/manifest-expanded/k10.yaml
Reading /data/manifest-expanded/k10.yaml
+ ensure_k8s_apps_labels.py --manifest /data/manifest-expanded/k10.yaml --appname kasten-k10-1
Reading /data/manifest-expanded/k10.yaml
+ /bin/set_ownership.py --app_name kasten-k10-1 --app_uid 7c9b0602-7f26-11e8-a573-42010a8a01a6 --app_api_version app.k8s.io/v1alpha1 --manifests /data/manifest-expanded --dest /data/resources.yaml
Reading /data/manifest-expanded/k10.yaml
Application 'kasten-k10-1' owns 'Secret/k10-api-key'
Application 'kasten-k10-1' owns 'ConfigMap/fluentd'
Application 'kasten-k10-1' owns 'ConfigMap/k10-config'
Application 'kasten-k10-1' owns 'ConfigMap/kasten-k10-1-k10-prometheus-config'
Application 'kasten-k10-1' owns 'Service/fluentd'
Application 'kasten-k10-1' owns 'Service/kasten-k10-1-prometheus-server'
Application 'kasten-k10-1' owns 'Service/ambassador'
Application 'kasten-k10-1' owns 'Deployment/ambassador'
Application 'kasten-k10-1' owns 'Service/api-policies'
Application 'kasten-k10-1' owns 'Service/api-profiles'
Application 'kasten-k10-1' owns 'Service/kasten-k10-1-prometheus-server-exp'
Application 'kasten-k10-1' owns 'Service/auth-svc'
Application 'kasten-k10-1' owns 'Service/catalog-svc'
Application 'kasten-k10-1' owns 'Service/compliance-svc'
Application 'kasten-k10-1' owns 'Service/credentials-svc'
Application 'kasten-k10-1' owns 'Service/executor-svc'
Application 'kasten-k10-1' owns 'Service/jobs-svc'
Application 'kasten-k10-1' owns 'Service/jobsqueue-svc'
Application 'kasten-k10-1' owns 'Service/policies-svc'
Application 'kasten-k10-1' owns 'Service/profiles-svc'
Application 'kasten-k10-1' owns 'Service/scheduler-svc'
Application 'kasten-k10-1' owns 'Service/schedules-svc'
Application 'kasten-k10-1' owns 'Service/state-svc'
Application 'kasten-k10-1' owns 'Service/dashboardbff-svc'
Application 'kasten-k10-1' owns 'Service/frontend-svc'
Application 'kasten-k10-1' owns 'Deployment/fluentd'
Application 'kasten-k10-1' owns 'Deployment/kasten-k10-1-prometheus-server'
Application 'kasten-k10-1' owns 'Deployment/api-policies-svc'
Application 'kasten-k10-1' owns 'Deployment/api-profiles-svc'
Application 'kasten-k10-1' owns 'Deployment/auth-svc'
Application 'kasten-k10-1' owns 'Deployment/catalog-svc'
Application 'kasten-k10-1' owns 'Deployment/compliance-svc'
Application 'kasten-k10-1' owns 'Deployment/credentials-svc'
Application 'kasten-k10-1' owns 'Deployment/executor-svc'
Application 'kasten-k10-1' owns 'Deployment/jobs-svc'
Application 'kasten-k10-1' owns 'Deployment/jobsqueue-svc'
Application 'kasten-k10-1' owns 'Deployment/policies-svc'
Application 'kasten-k10-1' owns 'Deployment/profiles-svc'
Application 'kasten-k10-1' owns 'Deployment/scheduler-svc'
Application 'kasten-k10-1' owns 'Deployment/schedules-svc'
Application 'kasten-k10-1' owns 'Deployment/state-svc'
Application 'kasten-k10-1' owns 'Deployment/dashboardbff-svc'
Application 'kasten-k10-1' owns 'ConfigMap/kasten-k10-1-k10-metering-config'
Application 'kasten-k10-1' owns 'Deployment/metering-svc'
Application 'kasten-k10-1' owns 'Deployment/frontend-svc'
Application 'kasten-k10-1' owns 'Deployment/kanister-svc'
Application 'kasten-k10-1' owns 'Ingress/kasten-k10-1-ingress'
Application 'kasten-k10-1' owns 'NetworkPolicy/default-deny'
Application 'kasten-k10-1' owns 'NetworkPolicy/cross-services-allow'
Application 'kasten-k10-1' owns 'NetworkPolicy/fluentd-allow-services'
Application 'kasten-k10-1' owns 'NetworkPolicy/allow-external'
+ separate_tester_resources.py --app_uid 7c9b0602-7f26-11e8-a573-42010a8a01a6 --app_name kasten-k10-1 --app_api_version app.k8s.io/v1alpha1 --manifests /data/resources.yaml --out_manifests /data/resources.yaml --out_test_manifests /data/tester.yaml
Reading /data/resources.yaml
INFO Prod resource: Secret/k10-api-key
INFO Prod resource: ConfigMap/fluentd
INFO Prod resource: ConfigMap/k10-config
INFO Prod resource: ConfigMap/kasten-k10-1-k10-prometheus-config
INFO Prod resource: PersistentVolumeClaim/fluentd
INFO Prod resource: PersistentVolumeClaim/kasten-k10-1-prometheus-server
INFO Prod resource: ServiceAccount/kasten-k10-1-prometheus-server
INFO Prod resource: Service/fluentd
INFO Prod resource: Service/kasten-k10-1-prometheus-server
INFO Prod resource: Service/ambassador
INFO Prod resource: Deployment/ambassador
INFO Prod resource: Service/api-policies
INFO Prod resource: Service/api-profiles
INFO Prod resource: Service/kasten-k10-1-prometheus-server-exp
INFO Prod resource: Service/auth-svc
INFO Prod resource: Service/catalog-svc
INFO Prod resource: Service/compliance-svc
INFO Prod resource: Service/credentials-svc
INFO Prod resource: Service/executor-svc
INFO Prod resource: Service/jobs-svc
INFO Prod resource: Service/jobsqueue-svc
INFO Prod resource: Service/policies-svc
INFO Prod resource: Service/profiles-svc
INFO Prod resource: Service/scheduler-svc
INFO Prod resource: Service/schedules-svc
INFO Prod resource: Service/state-svc
INFO Prod resource: Service/dashboardbff-svc
INFO Prod resource: Service/frontend-svc
INFO Prod resource: Deployment/fluentd
INFO Prod resource: Deployment/kasten-k10-1-prometheus-server
INFO Prod resource: Deployment/api-policies-svc
INFO Prod resource: Deployment/api-profiles-svc
INFO Prod resource: Deployment/auth-svc
INFO Prod resource: PersistentVolumeClaim/catalog-pv-claim
INFO Prod resource: Deployment/catalog-svc
INFO Prod resource: Deployment/compliance-svc
INFO Prod resource: PersistentVolumeClaim/credentials-pv-claim
INFO Prod resource: Deployment/credentials-svc
INFO Prod resource: Deployment/executor-svc
INFO Prod resource: PersistentVolumeClaim/jobs-pv-claim
INFO Prod resource: Deployment/jobs-svc
INFO Prod resource: PersistentVolumeClaim/jobsqueue-pv-claim
INFO Prod resource: Deployment/jobsqueue-svc
INFO Prod resource: PersistentVolumeClaim/policies-pv-claim
INFO Prod resource: Deployment/policies-svc
INFO Prod resource: PersistentVolumeClaim/profiles-pv-claim
INFO Prod resource: Deployment/profiles-svc
INFO Prod resource: Deployment/scheduler-svc
INFO Prod resource: PersistentVolumeClaim/schedules-pv-claim
INFO Prod resource: Deployment/schedules-svc
INFO Prod resource: PersistentVolumeClaim/state-pv-claim
INFO Prod resource: Deployment/state-svc
INFO Prod resource: Deployment/dashboardbff-svc
INFO Prod resource: ConfigMap/kasten-k10-1-k10-metering-config
INFO Prod resource: Deployment/metering-svc
INFO Prod resource: Deployment/frontend-svc
INFO Prod resource: Deployment/kanister-svc
INFO Prod resource: Ingress/kasten-k10-1-ingress
INFO Prod resource: Application/kasten-k10-1
INFO Prod resource: NetworkPolicy/default-deny
INFO Prod resource: NetworkPolicy/cross-services-allow
INFO Prod resource: NetworkPolicy/fluentd-allow-services
INFO Prod resource: NetworkPolicy/allow-external
+ cat /data/resources.yaml
apiVersion: v1
data:
  x-api-key: VjRKU2JJZW1mRFlxRHpJMXBhTzlKUEVBajF0SVRIS0o=
kind: Secret
metadata:
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    heritage: Tiller
    release: kasten-k10-1
  name: k10-api-key
  namespace: apptest-80129e39
  ownerReferences:
  - apiVersion: app.k8s.io/v1alpha1
    blockOwnerDeletion: true
    kind: Application
    name: kasten-k10-1
    uid: 7c9b0602-7f26-11e8-a573-42010a8a01a6
type: Opaque
---
apiVersion: v1
data:
  forward-input.conf: "<source>\n  @type forward\n  port 24224\n  bind 0.0.0.0\n</source>"
  general.conf: "# Prevent fluentd from handling records containing its own logs.\
    \ Otherwise\n# it can lead to an infinite loop, when error in sending one message\
    \ generates\n# another message which also fails to be sent and so on.\n<match\
    \ fluentd.**>\n  @type null\n</match>\n\n# Used for health checking\n<source>\n\
    \  @type http\n  port 9880\n  bind 0.0.0.0\n</source>\n\n# Emits internal metrics\
    \ to every minute, and also exposes them on port\n# 24220. Useful for determining\
    \ if an output plugin is retryring/erroring,\n# or determining the buffer queue\
    \ length.\n<source>\n  @type monitor_agent\n  bind 0.0.0.0\n  port 24220\n  tag\
    \ fluentd.monitor.metrics\n</source>"
  output.conf: "<match **>\n  @type file\n  path \"/mnt/log/k10.old\"\n  symlink_path\
    \ \"/mnt/log/k10.log\"\n  append true\n  <buffer>\n    @type file\n    flush_mode\
    \ interval\n    flush_interval 67m\n    flush_thread_count 1\n    retry_forever\n\
    \    retry_max_interval 60\n    chunk_limit_size \"#{ENV['OUTPUT_BUFFER_CHUNK_LIMIT']}\"\
    \n    queue_limit_length \"#{ENV['OUTPUT_BUFFER_QUEUE_LIMIT']}\"\n  </buffer>\n\
    </match>"
  system.conf: "<system>\n  root_dir \"/mnt/log/fluentd-buffers/\"\n</system>"
kind: ConfigMap
metadata:
  labels:
    app: fluentd
    app.kubernetes.io/name: kasten-k10-1
    chart: fluentd-0.1.4
    heritage: Tiller
    release: kasten-k10-1
  name: fluentd
  ownerReferences:
  - apiVersion: app.k8s.io/v1alpha1
    blockOwnerDeletion: true
    kind: Application
    name: kasten-k10-1
    uid: 7c9b0602-7f26-11e8-a573-42010a8a01a6
---
apiVersion: v1
data:
  clustername: 7FExqHyvdw3ryY5R
  firehosedeliverystreamname: k10-testdev-logger
  loglevel: info
  modelstoredirname: //mnt/k10state/kasten-io/
  version: 1.1.13
kind: ConfigMap
metadata:
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    heritage: Tiller
    release: kasten-k10-1
  name: k10-config
  namespace: apptest-80129e39
  ownerReferences:
  - apiVersion: app.k8s.io/v1alpha1
    blockOwnerDeletion: true
    kind: Application
    name: kasten-k10-1
    uid: 7c9b0602-7f26-11e8-a573-42010a8a01a6
---
apiVersion: v1
data:
  prometheus.yml: "global:\n  scrape_interval: 1m\n  scrape_timeout: 10s\n  evaluation_interval:\
    \ 1m\nscrape_configs:\n  - job_name: auth\n    metrics_path: /metrics\n    scheme:\
    \ http\n    static_configs:\n      - targets:\n        - auth-svc.apptest-80129e39.svc.cluster.local:8000\n\
    \  - job_name: catalog\n    metrics_path: /metrics\n    scheme: http\n    static_configs:\n\
    \      - targets:\n        - catalog-svc.apptest-80129e39.svc.cluster.local:8000\n\
    \  - job_name: compliance\n    metrics_path: /metrics\n    scheme: http\n    static_configs:\n\
    \      - targets:\n        - compliance-svc.apptest-80129e39.svc.cluster.local:8000\n\
    \  - job_name: credentials\n    metrics_path: /metrics\n    scheme: http\n   \
    \ static_configs:\n      - targets:\n        - credentials-svc.apptest-80129e39.svc.cluster.local:8000\n\
    \  - job_name: executor\n    metrics_path: /metrics\n    scheme: http\n    static_configs:\n\
    \      - targets:\n        - executor-svc.apptest-80129e39.svc.cluster.local:8000\n\
    \  - job_name: jobs\n    metrics_path: /metrics\n    scheme: http\n    static_configs:\n\
    \      - targets:\n        - jobs-svc.apptest-80129e39.svc.cluster.local:8000\n\
    \  - job_name: jobsqueue\n    metrics_path: /metrics\n    scheme: http\n    static_configs:\n\
    \      - targets:\n        - jobsqueue-svc.apptest-80129e39.svc.cluster.local:8000\n\
    \  - job_name: policies\n    metrics_path: /metrics\n    scheme: http\n    static_configs:\n\
    \      - targets:\n        - policies-svc.apptest-80129e39.svc.cluster.local:8000\n\
    \  - job_name: profiles\n    metrics_path: /metrics\n    scheme: http\n    static_configs:\n\
    \      - targets:\n        - profiles-svc.apptest-80129e39.svc.cluster.local:8000\n\
    \  - job_name: scheduler\n    metrics_path: /metrics\n    scheme: http\n    static_configs:\n\
    \      - targets:\n        - scheduler-svc.apptest-80129e39.svc.cluster.local:8000\n\
    \  - job_name: schedules\n    metrics_path: /metrics\n    scheme: http\n    static_configs:\n\
    \      - targets:\n        - schedules-svc.apptest-80129e39.svc.cluster.local:8000\n\
    \  - job_name: state\n    metrics_path: /metrics\n    scheme: http\n    static_configs:\n\
    \      - targets:\n        - state-svc.apptest-80129e39.svc.cluster.local:8000\n\
    \  - job_name: dashboardbff\n    metrics_path: /metrics\n    scheme: http\n  \
    \  static_configs:\n      - targets:\n        - dashboardbff-svc.apptest-80129e39.svc.cluster.local:8000\n"
kind: ConfigMap
metadata:
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    heritage: Tiller
    release: kasten-k10-1
  name: kasten-k10-1-k10-prometheus-config
  namespace: apptest-80129e39
  ownerReferences:
  - apiVersion: app.k8s.io/v1alpha1
    blockOwnerDeletion: true
    kind: Application
    name: kasten-k10-1
    uid: 7c9b0602-7f26-11e8-a573-42010a8a01a6
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  labels:
    app: fluentd
    app.kubernetes.io/name: kasten-k10-1
    chart: fluentd-0.1.4
    heritage: Tiller
    release: kasten-k10-1
  name: fluentd
spec:
  accessModes:
  - ReadWriteOnce
  resources:
    requests:
      storage: 10Gi
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  labels:
    app: prometheus
    app.kubernetes.io/name: kasten-k10-1
    chart: prometheus-6.7.0
    component: server
    heritage: Tiller
    release: kasten-k10-1
  name: kasten-k10-1-prometheus-server
spec:
  accessModes:
  - ReadWriteOnce
  resources:
    requests:
      storage: 8Gi
---
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    app: prometheus
    app.kubernetes.io/name: kasten-k10-1
    chart: prometheus-6.7.0
    component: server
    heritage: Tiller
    release: kasten-k10-1
  name: kasten-k10-1-prometheus-server
---
apiVersion: v1
kind: Service
metadata:
  labels:
    app: fluentd
    app.kubernetes.io/name: kasten-k10-1
    chart: fluentd-0.1.4
    heritage: Tiller
    release: kasten-k10-1
  name: fluentd
  ownerReferences:
  - apiVersion: app.k8s.io/v1alpha1
    blockOwnerDeletion: true
    kind: Application
    name: kasten-k10-1
    uid: 7c9b0602-7f26-11e8-a573-42010a8a01a6
spec:
  ports:
  - name: monitor-agent
    port: 24220
    protocol: TCP
    targetPort: 24220
  - name: input-port
    port: 24224
    protocol: TCP
    targetPort: 24224
  selector:
    app: fluentd
    release: kasten-k10-1
  type: ClusterIP
---
apiVersion: v1
kind: Service
metadata:
  labels:
    app: prometheus
    app.kubernetes.io/name: kasten-k10-1
    chart: prometheus-6.7.0
    component: server
    heritage: Tiller
    release: kasten-k10-1
  name: kasten-k10-1-prometheus-server
  ownerReferences:
  - apiVersion: app.k8s.io/v1alpha1
    blockOwnerDeletion: true
    kind: Application
    name: kasten-k10-1
    uid: 7c9b0602-7f26-11e8-a573-42010a8a01a6
spec:
  ports:
  - name: http
    port: 80
    protocol: TCP
    targetPort: 9090
  selector:
    app: prometheus
    component: server
    release: kasten-k10-1
  type: ClusterIP
---
apiVersion: v1
kind: Service
metadata:
  annotations:
    getambassador.io/config: '---

      apiVersion: ambassador/v0

      kind:  AuthService

      name:  authentication

      auth_service: "auth-svc:8000"

      path_prefix: "/v0/authz"

      '
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    heritage: Tiller
    release: kasten-k10-1
    service: ambassador
  name: ambassador
  ownerReferences:
  - apiVersion: app.k8s.io/v1alpha1
    blockOwnerDeletion: true
    kind: Application
    name: kasten-k10-1
    uid: 7c9b0602-7f26-11e8-a573-42010a8a01a6
spec:
  ports:
  - name: http
    port: 80
    targetPort: 80
  selector:
    service: ambassador
---
apiVersion: apps/v1beta1
kind: Deployment
metadata:
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    heritage: Tiller
    release: kasten-k10-1
  name: ambassador
  ownerReferences:
  - apiVersion: app.k8s.io/v1alpha1
    blockOwnerDeletion: true
    kind: Application
    name: kasten-k10-1
    uid: 7c9b0602-7f26-11e8-a573-42010a8a01a6
spec:
  replicas: 1
  template:
    metadata:
      labels:
        app: k10
        chart: k10-1.1.13
        heritage: Tiller
        release: kasten-k10-1
        service: ambassador
    spec:
      containers:
      - env:
        - name: AMBASSADOR_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        - name: AMBASSADOR_SINGLE_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        image: quay.io/datawire/ambassador:0.34.3
        livenessProbe:
          httpGet:
            path: /ambassador/v0/check_alive
            port: 8877
          initialDelaySeconds: 30
          periodSeconds: 3
        name: ambassador
        readinessProbe:
          httpGet:
            path: /ambassador/v0/check_ready
            port: 8877
          initialDelaySeconds: 30
          periodSeconds: 3
        resources:
          limits:
            cpu: 1
            memory: 400Mi
          requests:
            cpu: 200m
            memory: 100Mi
      - image: quay.io/datawire/statsd:0.34.3
        name: statsd
      restartPolicy: Always
      serviceAccountName: kasten-k10-1-serviceaccount.name-7664
---
apiVersion: v1
kind: Service
metadata:
  annotations:
    getambassador.io/config: '---

      apiVersion: ambassador/v0

      kind:  Mapping

      name:  api-policies-mapping

      grpc: true

      prefix: /policies.Policies/

      rewrite: /policies.Policies/

      service: api-policies:9000

      timeout_ms: 15000

      '
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    component: api-policies
    heritage: Tiller
    release: kasten-k10-1
    run: api-policies-svc
  name: api-policies
  namespace: apptest-80129e39
  ownerReferences:
  - apiVersion: app.k8s.io/v1alpha1
    blockOwnerDeletion: true
    kind: Application
    name: kasten-k10-1
    uid: 7c9b0602-7f26-11e8-a573-42010a8a01a6
spec:
  ports:
  - name: http
    port: 9000
    protocol: TCP
    targetPort: 9000
  selector:
    run: api-policies-svc
---
apiVersion: v1
kind: Service
metadata:
  annotations:
    getambassador.io/config: '---

      apiVersion: ambassador/v0

      kind:  Mapping

      name:  api-profiles-mapping

      grpc: true

      prefix: /profiles.Profiles/

      rewrite: /profiles.Profiles/

      service: api-profiles:9000

      timeout_ms: 15000

      '
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    component: api-profiles
    heritage: Tiller
    release: kasten-k10-1
    run: api-profiles-svc
  name: api-profiles
  namespace: apptest-80129e39
  ownerReferences:
  - apiVersion: app.k8s.io/v1alpha1
    blockOwnerDeletion: true
    kind: Application
    name: kasten-k10-1
    uid: 7c9b0602-7f26-11e8-a573-42010a8a01a6
spec:
  ports:
  - name: http
    port: 9000
    protocol: TCP
    targetPort: 9000
  selector:
    run: api-profiles-svc
---
apiVersion: v1
kind: Service
metadata:
  annotations:
    getambassador.io/config: '---

      apiVersion: ambassador/v0

      kind:  Mapping

      name:  kasten-k10-1-prometheus-server-mapping

      prefix: /kasten-k10-1/prometheus/

      service: kasten-k10-1-prometheus-server.apptest-80129e39:80

      timeout_ms: 15000

      '
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    component: kasten-k10-1-prometheus-server
    heritage: Tiller
    release: kasten-k10-1
    run: kasten-k10-1-prometheus-server
  name: kasten-k10-1-prometheus-server-exp
  namespace: apptest-80129e39
  ownerReferences:
  - apiVersion: app.k8s.io/v1alpha1
    blockOwnerDeletion: true
    kind: Application
    name: kasten-k10-1
    uid: 7c9b0602-7f26-11e8-a573-42010a8a01a6
spec:
  ports:
  - name: http
    port: 80
    protocol: TCP
    targetPort: 9090
  selector:
    run: kasten-k10-1-prometheus-server
---
apiVersion: v1
kind: Service
metadata:
  annotations:
    getambassador.io/config: '---

      apiVersion: ambassador/v0

      kind:  Mapping

      name:  auth-mapping

      prefix: /kasten-k10-1/auth-svc/

      rewrite: /

      service: auth-svc.apptest-80129e39:8000

      timeout_ms: 15000

      '
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    component: auth
    heritage: Tiller
    release: kasten-k10-1
    run: auth-svc
  name: auth-svc
  namespace: apptest-80129e39
  ownerReferences:
  - apiVersion: app.k8s.io/v1alpha1
    blockOwnerDeletion: true
    kind: Application
    name: kasten-k10-1
    uid: 7c9b0602-7f26-11e8-a573-42010a8a01a6
spec:
  ports:
  - name: http
    port: 8000
    protocol: TCP
    targetPort: 8000
  selector:
    run: auth-svc
---
apiVersion: v1
kind: Service
metadata:
  annotations:
    getambassador.io/config: '---

      apiVersion: ambassador/v0

      kind:  Mapping

      name:  catalog-mapping

      prefix: /kasten-k10-1/catalog-svc/

      rewrite: /

      service: catalog-svc.apptest-80129e39:8000

      timeout_ms: 15000

      '
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    component: catalog
    heritage: Tiller
    release: kasten-k10-1
    run: catalog-svc
  name: catalog-svc
  namespace: apptest-80129e39
  ownerReferences:
  - apiVersion: app.k8s.io/v1alpha1
    blockOwnerDeletion: true
    kind: Application
    name: kasten-k10-1
    uid: 7c9b0602-7f26-11e8-a573-42010a8a01a6
spec:
  ports:
  - name: http
    port: 8000
    protocol: TCP
    targetPort: 8000
  selector:
    run: catalog-svc
---
apiVersion: v1
kind: Service
metadata:
  annotations:
    getambassador.io/config: '---

      apiVersion: ambassador/v0

      kind:  Mapping

      name:  compliance-mapping

      prefix: /kasten-k10-1/compliance-svc/

      rewrite: /

      service: compliance-svc.apptest-80129e39:8000

      timeout_ms: 15000

      '
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    component: compliance
    heritage: Tiller
    release: kasten-k10-1
    run: compliance-svc
  name: compliance-svc
  namespace: apptest-80129e39
  ownerReferences:
  - apiVersion: app.k8s.io/v1alpha1
    blockOwnerDeletion: true
    kind: Application
    name: kasten-k10-1
    uid: 7c9b0602-7f26-11e8-a573-42010a8a01a6
spec:
  ports:
  - name: http
    port: 8000
    protocol: TCP
    targetPort: 8000
  selector:
    run: compliance-svc
---
apiVersion: v1
kind: Service
metadata:
  annotations:
    getambassador.io/config: '---

      apiVersion: ambassador/v0

      kind:  Mapping

      name:  credentials-mapping

      prefix: /kasten-k10-1/credentials-svc/

      rewrite: /

      service: credentials-svc.apptest-80129e39:8000

      timeout_ms: 15000

      '
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    component: credentials
    heritage: Tiller
    release: kasten-k10-1
    run: credentials-svc
  name: credentials-svc
  namespace: apptest-80129e39
  ownerReferences:
  - apiVersion: app.k8s.io/v1alpha1
    blockOwnerDeletion: true
    kind: Application
    name: kasten-k10-1
    uid: 7c9b0602-7f26-11e8-a573-42010a8a01a6
spec:
  ports:
  - name: http
    port: 8000
    protocol: TCP
    targetPort: 8000
  selector:
    run: credentials-svc
---
apiVersion: v1
kind: Service
metadata:
  annotations:
    getambassador.io/config: '---

      apiVersion: ambassador/v0

      kind:  Mapping

      name:  executor-mapping

      prefix: /kasten-k10-1/executor-svc/

      rewrite: /

      service: executor-svc.apptest-80129e39:8000

      timeout_ms: 15000

      '
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    component: executor
    heritage: Tiller
    release: kasten-k10-1
    run: executor-svc
  name: executor-svc
  namespace: apptest-80129e39
  ownerReferences:
  - apiVersion: app.k8s.io/v1alpha1
    blockOwnerDeletion: true
    kind: Application
    name: kasten-k10-1
    uid: 7c9b0602-7f26-11e8-a573-42010a8a01a6
spec:
  ports:
  - name: http
    port: 8000
    protocol: TCP
    targetPort: 8000
  selector:
    run: executor-svc
---
apiVersion: v1
kind: Service
metadata:
  annotations:
    getambassador.io/config: '---

      apiVersion: ambassador/v0

      kind:  Mapping

      name:  jobs-mapping

      prefix: /kasten-k10-1/jobs-svc/

      rewrite: /

      service: jobs-svc.apptest-80129e39:8000

      timeout_ms: 15000

      '
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    component: jobs
    heritage: Tiller
    release: kasten-k10-1
    run: jobs-svc
  name: jobs-svc
  namespace: apptest-80129e39
  ownerReferences:
  - apiVersion: app.k8s.io/v1alpha1
    blockOwnerDeletion: true
    kind: Application
    name: kasten-k10-1
    uid: 7c9b0602-7f26-11e8-a573-42010a8a01a6
spec:
  ports:
  - name: http
    port: 8000
    protocol: TCP
    targetPort: 8000
  selector:
    run: jobs-svc
---
apiVersion: v1
kind: Service
metadata:
  annotations:
    getambassador.io/config: '---

      apiVersion: ambassador/v0

      kind:  Mapping

      name:  jobsqueue-mapping

      prefix: /kasten-k10-1/jobsqueue-svc/

      rewrite: /

      service: jobsqueue-svc.apptest-80129e39:8000

      timeout_ms: 15000

      '
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    component: jobsqueue
    heritage: Tiller
    release: kasten-k10-1
    run: jobsqueue-svc
  name: jobsqueue-svc
  namespace: apptest-80129e39
  ownerReferences:
  - apiVersion: app.k8s.io/v1alpha1
    blockOwnerDeletion: true
    kind: Application
    name: kasten-k10-1
    uid: 7c9b0602-7f26-11e8-a573-42010a8a01a6
spec:
  ports:
  - name: http
    port: 8000
    protocol: TCP
    targetPort: 8000
  selector:
    run: jobsqueue-svc
---
apiVersion: v1
kind: Service
metadata:
  annotations:
    getambassador.io/config: '---

      apiVersion: ambassador/v0

      kind:  Mapping

      name:  policies-mapping

      prefix: /kasten-k10-1/policies-svc/

      rewrite: /

      service: policies-svc.apptest-80129e39:8000

      timeout_ms: 15000

      '
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    component: policies
    heritage: Tiller
    release: kasten-k10-1
    run: policies-svc
  name: policies-svc
  namespace: apptest-80129e39
  ownerReferences:
  - apiVersion: app.k8s.io/v1alpha1
    blockOwnerDeletion: true
    kind: Application
    name: kasten-k10-1
    uid: 7c9b0602-7f26-11e8-a573-42010a8a01a6
spec:
  ports:
  - name: http
    port: 8000
    protocol: TCP
    targetPort: 8000
  selector:
    run: policies-svc
---
apiVersion: v1
kind: Service
metadata:
  annotations:
    getambassador.io/config: '---

      apiVersion: ambassador/v0

      kind:  Mapping

      name:  profiles-mapping

      prefix: /kasten-k10-1/profiles-svc/

      rewrite: /

      service: profiles-svc.apptest-80129e39:8000

      timeout_ms: 60000

      '
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    component: profiles
    heritage: Tiller
    release: kasten-k10-1
    run: profiles-svc
  name: profiles-svc
  namespace: apptest-80129e39
  ownerReferences:
  - apiVersion: app.k8s.io/v1alpha1
    blockOwnerDeletion: true
    kind: Application
    name: kasten-k10-1
    uid: 7c9b0602-7f26-11e8-a573-42010a8a01a6
spec:
  ports:
  - name: http
    port: 8000
    protocol: TCP
    targetPort: 8000
  selector:
    run: profiles-svc
---
apiVersion: v1
kind: Service
metadata:
  annotations:
    getambassador.io/config: '---

      apiVersion: ambassador/v0

      kind:  Mapping

      name:  scheduler-mapping

      prefix: /kasten-k10-1/scheduler-svc/

      rewrite: /

      service: scheduler-svc.apptest-80129e39:8000

      timeout_ms: 15000

      '
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    component: scheduler
    heritage: Tiller
    release: kasten-k10-1
    run: scheduler-svc
  name: scheduler-svc
  namespace: apptest-80129e39
  ownerReferences:
  - apiVersion: app.k8s.io/v1alpha1
    blockOwnerDeletion: true
    kind: Application
    name: kasten-k10-1
    uid: 7c9b0602-7f26-11e8-a573-42010a8a01a6
spec:
  ports:
  - name: http
    port: 8000
    protocol: TCP
    targetPort: 8000
  selector:
    run: scheduler-svc
---
apiVersion: v1
kind: Service
metadata:
  annotations:
    getambassador.io/config: '---

      apiVersion: ambassador/v0

      kind:  Mapping

      name:  schedules-mapping

      prefix: /kasten-k10-1/schedules-svc/

      rewrite: /

      service: schedules-svc.apptest-80129e39:8000

      timeout_ms: 15000

      '
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    component: schedules
    heritage: Tiller
    release: kasten-k10-1
    run: schedules-svc
  name: schedules-svc
  namespace: apptest-80129e39
  ownerReferences:
  - apiVersion: app.k8s.io/v1alpha1
    blockOwnerDeletion: true
    kind: Application
    name: kasten-k10-1
    uid: 7c9b0602-7f26-11e8-a573-42010a8a01a6
spec:
  ports:
  - name: http
    port: 8000
    protocol: TCP
    targetPort: 8000
  selector:
    run: schedules-svc
---
apiVersion: v1
kind: Service
metadata:
  annotations:
    getambassador.io/config: '---

      apiVersion: ambassador/v0

      kind:  Mapping

      name:  state-mapping

      prefix: /kasten-k10-1/state-svc/

      rewrite: /

      service: state-svc.apptest-80129e39:8000

      timeout_ms: 15000

      '
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    component: state
    heritage: Tiller
    release: kasten-k10-1
    run: state-svc
  name: state-svc
  namespace: apptest-80129e39
  ownerReferences:
  - apiVersion: app.k8s.io/v1alpha1
    blockOwnerDeletion: true
    kind: Application
    name: kasten-k10-1
    uid: 7c9b0602-7f26-11e8-a573-42010a8a01a6
spec:
  ports:
  - name: http
    port: 8000
    protocol: TCP
    targetPort: 8000
  selector:
    run: state-svc
---
apiVersion: v1
kind: Service
metadata:
  annotations:
    getambassador.io/config: '---

      apiVersion: ambassador/v0

      kind:  Mapping

      name:  dashboardbff-mapping

      prefix: /kasten-k10-1/dashboardbff-svc/

      rewrite: /

      service: dashboardbff-svc.apptest-80129e39:8000

      timeout_ms: 15000

      '
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    component: dashboardbff
    heritage: Tiller
    release: kasten-k10-1
    run: dashboardbff-svc
  name: dashboardbff-svc
  namespace: apptest-80129e39
  ownerReferences:
  - apiVersion: app.k8s.io/v1alpha1
    blockOwnerDeletion: true
    kind: Application
    name: kasten-k10-1
    uid: 7c9b0602-7f26-11e8-a573-42010a8a01a6
spec:
  ports:
  - name: http
    port: 8000
    protocol: TCP
    targetPort: 8000
  selector:
    run: dashboardbff-svc
---
apiVersion: v1
kind: Service
metadata:
  annotations:
    getambassador.io/config: '---

      apiVersion: ambassador/v0

      kind:  Mapping

      name:  frontend-mapping

      prefix: /kasten-k10-1

      rewrite: /

      service: frontend-svc.apptest-80129e39:8000

      timeout_ms: 15000

      '
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    component: frontend
    heritage: Tiller
    release: kasten-k10-1
    run: frontend-svc
  name: frontend-svc
  namespace: apptest-80129e39
  ownerReferences:
  - apiVersion: app.k8s.io/v1alpha1
    blockOwnerDeletion: true
    kind: Application
    name: kasten-k10-1
    uid: 7c9b0602-7f26-11e8-a573-42010a8a01a6
spec:
  ports:
  - name: http
    port: 8000
    protocol: TCP
    targetPort: 8000
  selector:
    run: frontend-svc
---
apiVersion: apps/v1beta1
kind: Deployment
metadata:
  labels:
    app: fluentd
    app.kubernetes.io/name: kasten-k10-1
    chart: fluentd-0.1.4
    heritage: Tiller
    release: kasten-k10-1
  name: fluentd
  ownerReferences:
  - apiVersion: app.k8s.io/v1alpha1
    blockOwnerDeletion: true
    kind: Application
    name: kasten-k10-1
    uid: 7c9b0602-7f26-11e8-a573-42010a8a01a6
spec:
  replicas: null
  selector:
    matchLabels:
      app: fluentd
      release: kasten-k10-1
  template:
    metadata:
      labels:
        app: fluentd
        release: kasten-k10-1
    spec:
      containers:
      - env:
        - name: OUTPUT_HOST
          value: elasticsearch-client.default.svc.cluster.local
        - name: OUTPUT_PORT
          value: '9200'
        - name: OUTPUT_BUFFER_CHUNK_LIMIT
          value: 2M
        - name: OUTPUT_BUFFER_QUEUE_LIMIT
          value: '8'
        image: gcr.io/google-containers/fluentd-elasticsearch:v2.0.4
        imagePullPolicy: IfNotPresent
        livenessProbe:
          httpGet:
            path: /fluentd.pod.healthcheck?json=%7B%22log%22%3A+%22health+check%22%7D
            port: 9880
          initialDelaySeconds: 5
          timeoutSeconds: 1
        name: fluentd
        ports:
        - containerPort: 24220
          name: monitor-agent
          protocol: TCP
        - containerPort: 24224
          name: input-port
          protocol: TCP
        - containerPort: 9880
          name: http-input
          protocol: TCP
        resources: {}
        volumeMounts:
        - mountPath: /etc/fluent/config.d
          name: config-volume-fluentd
        - mountPath: /mnt/log
          name: log-volume-fluentd
      volumes:
      - configMap:
          name: fluentd
        name: config-volume-fluentd
      - name: log-volume-fluentd
        persistentVolumeClaim:
          claimName: fluentd
---
apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  labels:
    app: prometheus
    app.kubernetes.io/name: kasten-k10-1
    chart: prometheus-6.7.0
    component: server
    heritage: Tiller
    release: kasten-k10-1
  name: kasten-k10-1-prometheus-server
  ownerReferences:
  - apiVersion: app.k8s.io/v1alpha1
    blockOwnerDeletion: true
    kind: Application
    name: kasten-k10-1
    uid: 7c9b0602-7f26-11e8-a573-42010a8a01a6
spec:
  replicas: 1
  template:
    metadata:
      labels:
        app: prometheus
        component: server
        release: kasten-k10-1
    spec:
      containers:
      - args:
        - --volume-dir=/etc/config
        - --webhook-url=http://localhost:9090/-/reload
        image: jimmidyson/configmap-reload:v0.1
        imagePullPolicy: IfNotPresent
        name: prometheus-server-configmap-reload
        resources: {}
        volumeMounts:
        - mountPath: /etc/config
          name: config-volume
          readOnly: true
      - args:
        - --config.file=/etc/config/prometheus.yml
        - --storage.tsdb.path=/data
        - --web.console.libraries=/etc/prometheus/console_libraries
        - --web.console.templates=/etc/prometheus/consoles
        - --web.enable-lifecycle
        image: prom/prometheus:v2.2.1
        imagePullPolicy: IfNotPresent
        livenessProbe:
          httpGet:
            path: /-/healthy
            port: 9090
          initialDelaySeconds: 30
          timeoutSeconds: 30
        name: prometheus-server
        ports:
        - containerPort: 9090
        readinessProbe:
          httpGet:
            path: /-/ready
            port: 9090
          initialDelaySeconds: 30
          timeoutSeconds: 30
        resources: {}
        volumeMounts:
        - mountPath: /etc/config
          name: config-volume
        - mountPath: /data
          name: storage-volume
          subPath: ''
      initContainers:
      - command:
        - chown
        - -R
        - 65534:65534
        - /data
        image: busybox:latest
        imagePullPolicy: IfNotPresent
        name: init-chown-data
        resources: {}
        volumeMounts:
        - mountPath: /data
          name: storage-volume
          subPath: ''
      serviceAccountName: kasten-k10-1-prometheus-server
      terminationGracePeriodSeconds: 300
      volumes:
      - configMap:
          name: kasten-k10-1-k10-prometheus-config
        name: config-volume
      - name: storage-volume
        persistentVolumeClaim:
          claimName: kasten-k10-1-prometheus-server
---
apiVersion: apps/v1beta1
kind: Deployment
metadata:
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    component: api-policies
    heritage: Tiller
    release: kasten-k10-1
  name: api-policies-svc
  namespace: apptest-80129e39
  ownerReferences:
  - apiVersion: app.k8s.io/v1alpha1
    blockOwnerDeletion: true
    kind: Application
    name: kasten-k10-1
    uid: 7c9b0602-7f26-11e8-a573-42010a8a01a6
spec:
  replicas: 1
  strategy:
    type: Recreate
  template:
    metadata:
      labels:
        app: k10
        chart: k10-1.1.13
        component: api-policies
        heritage: Tiller
        release: kasten-k10-1
        run: api-policies-svc
    spec:
      containers:
      - env:
        - name: VERSION
          valueFrom:
            configMapKeyRef:
              key: version
              name: k10-config
        - name: CLUSTER_NAME
          valueFrom:
            configMapKeyRef:
              key: clustername
              name: k10-config
        - name: MODEL_STORE_DIR
          valueFrom:
            configMapKeyRef:
              key: modelstoredirname
              name: k10-config
        - name: AWS_FIREHOSE_DELIVERY_STREAM_NAME
          valueFrom:
            configMapKeyRef:
              key: firehosedeliverystreamname
              name: k10-config
        - name: LOG_LEVEL
          valueFrom:
            configMapKeyRef:
              key: loglevel
              name: k10-config
        - name: POD_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        image: gcr.io/kasten-cloudlauncher/k10/api-policies:1.1
        imagePullPolicy: Always
        livenessProbe:
          httpGet:
            path: /v0/healthz
            port: 8000
          initialDelaySeconds: 90
          timeoutSeconds: 1
        name: api-policies-svc
        ports:
        - containerPort: 8000
      - args:
        - tail
        - -f
        - /dev/null
        image: gcr.io/kasten-images/service-proxy:hash-bc17b40
        imagePullPolicy: Always
        name: proxy
      serviceAccountName: kasten-k10-1-serviceaccount.name-7664
---
apiVersion: apps/v1beta1
kind: Deployment
metadata:
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    component: api-profiles
    heritage: Tiller
    release: kasten-k10-1
  name: api-profiles-svc
  namespace: apptest-80129e39
  ownerReferences:
  - apiVersion: app.k8s.io/v1alpha1
    blockOwnerDeletion: true
    kind: Application
    name: kasten-k10-1
    uid: 7c9b0602-7f26-11e8-a573-42010a8a01a6
spec:
  replicas: 1
  strategy:
    type: Recreate
  template:
    metadata:
      labels:
        app: k10
        chart: k10-1.1.13
        component: api-profiles
        heritage: Tiller
        release: kasten-k10-1
        run: api-profiles-svc
    spec:
      containers:
      - env:
        - name: VERSION
          valueFrom:
            configMapKeyRef:
              key: version
              name: k10-config
        - name: CLUSTER_NAME
          valueFrom:
            configMapKeyRef:
              key: clustername
              name: k10-config
        - name: MODEL_STORE_DIR
          valueFrom:
            configMapKeyRef:
              key: modelstoredirname
              name: k10-config
        - name: AWS_FIREHOSE_DELIVERY_STREAM_NAME
          valueFrom:
            configMapKeyRef:
              key: firehosedeliverystreamname
              name: k10-config
        - name: LOG_LEVEL
          valueFrom:
            configMapKeyRef:
              key: loglevel
              name: k10-config
        - name: POD_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        image: gcr.io/kasten-cloudlauncher/k10/api-profiles:1.1
        imagePullPolicy: Always
        livenessProbe:
          httpGet:
            path: /v0/healthz
            port: 8000
          initialDelaySeconds: 90
          timeoutSeconds: 1
        name: api-profiles-svc
        ports:
        - containerPort: 8000
      - args:
        - tail
        - -f
        - /dev/null
        image: gcr.io/kasten-images/service-proxy:hash-bc17b40
        imagePullPolicy: Always
        name: proxy
      serviceAccountName: kasten-k10-1-serviceaccount.name-7664
---
apiVersion: apps/v1beta1
kind: Deployment
metadata:
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    component: auth
    heritage: Tiller
    release: kasten-k10-1
  name: auth-svc
  namespace: apptest-80129e39
  ownerReferences:
  - apiVersion: app.k8s.io/v1alpha1
    blockOwnerDeletion: true
    kind: Application
    name: kasten-k10-1
    uid: 7c9b0602-7f26-11e8-a573-42010a8a01a6
spec:
  replicas: 1
  strategy:
    type: Recreate
  template:
    metadata:
      labels:
        app: k10
        chart: k10-1.1.13
        component: auth
        heritage: Tiller
        release: kasten-k10-1
        run: auth-svc
    spec:
      containers:
      - env:
        - name: VERSION
          valueFrom:
            configMapKeyRef:
              key: version
              name: k10-config
        - name: CLUSTER_NAME
          valueFrom:
            configMapKeyRef:
              key: clustername
              name: k10-config
        - name: MODEL_STORE_DIR
          valueFrom:
            configMapKeyRef:
              key: modelstoredirname
              name: k10-config
        - name: AWS_FIREHOSE_DELIVERY_STREAM_NAME
          valueFrom:
            configMapKeyRef:
              key: firehosedeliverystreamname
              name: k10-config
        - name: LOG_LEVEL
          valueFrom:
            configMapKeyRef:
              key: loglevel
              name: k10-config
        - name: POD_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        image: gcr.io/kasten-cloudlauncher/k10/auth:1.1
        imagePullPolicy: Always
        livenessProbe:
          httpGet:
            path: /v0/healthz
            port: 8000
          initialDelaySeconds: 90
          timeoutSeconds: 1
        name: auth-svc
        ports:
        - containerPort: 8000
        volumeMounts:
        - mountPath: /var/run/secret/kasten.io/k10-api-key
          name: k10-api-key
          readOnly: true
      - args:
        - tail
        - -f
        - /dev/null
        image: gcr.io/kasten-images/service-proxy:hash-bc17b40
        imagePullPolicy: Always
        name: proxy
      serviceAccountName: kasten-k10-1-serviceaccount.name-7664
      volumes:
      - name: k10-api-key
        secret:
          secretName: k10-api-key
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    component: catalog
    heritage: Tiller
    release: kasten-k10-1
  name: catalog-pv-claim
  namespace: apptest-80129e39
spec:
  accessModes:
  - ReadWriteOnce
  resources:
    requests:
      storage: 20Gi
---
apiVersion: apps/v1beta1
kind: Deployment
metadata:
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    component: catalog
    heritage: Tiller
    release: kasten-k10-1
  name: catalog-svc
  namespace: apptest-80129e39
  ownerReferences:
  - apiVersion: app.k8s.io/v1alpha1
    blockOwnerDeletion: true
    kind: Application
    name: kasten-k10-1
    uid: 7c9b0602-7f26-11e8-a573-42010a8a01a6
spec:
  replicas: 1
  strategy:
    type: Recreate
  template:
    metadata:
      labels:
        app: k10
        chart: k10-1.1.13
        component: catalog
        heritage: Tiller
        release: kasten-k10-1
        run: catalog-svc
    spec:
      containers:
      - env:
        - name: VERSION
          valueFrom:
            configMapKeyRef:
              key: version
              name: k10-config
        - name: CLUSTER_NAME
          valueFrom:
            configMapKeyRef:
              key: clustername
              name: k10-config
        - name: MODEL_STORE_DIR
          valueFrom:
            configMapKeyRef:
              key: modelstoredirname
              name: k10-config
        - name: AWS_FIREHOSE_DELIVERY_STREAM_NAME
          valueFrom:
            configMapKeyRef:
              key: firehosedeliverystreamname
              name: k10-config
        - name: LOG_LEVEL
          valueFrom:
            configMapKeyRef:
              key: loglevel
              name: k10-config
        - name: POD_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        image: gcr.io/kasten-cloudlauncher/k10/catalog:1.1
        imagePullPolicy: Always
        livenessProbe:
          httpGet:
            path: /v0/healthz
            port: 8000
          initialDelaySeconds: 90
          timeoutSeconds: 1
        name: catalog-svc
        ports:
        - containerPort: 8000
        volumeMounts:
        - mountPath: /mnt/k10state
          name: catalog-persistent-storage
      - args:
        - tail
        - -f
        - /dev/null
        image: gcr.io/kasten-images/service-proxy:hash-bc17b40
        imagePullPolicy: Always
        name: proxy
      serviceAccountName: kasten-k10-1-serviceaccount.name-7664
      volumes:
      - name: catalog-persistent-storage
        persistentVolumeClaim:
          claimName: catalog-pv-claim
---
apiVersion: apps/v1beta1
kind: Deployment
metadata:
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    component: compliance
    heritage: Tiller
    release: kasten-k10-1
  name: compliance-svc
  namespace: apptest-80129e39
  ownerReferences:
  - apiVersion: app.k8s.io/v1alpha1
    blockOwnerDeletion: true
    kind: Application
    name: kasten-k10-1
    uid: 7c9b0602-7f26-11e8-a573-42010a8a01a6
spec:
  replicas: 1
  strategy:
    type: Recreate
  template:
    metadata:
      labels:
        app: k10
        chart: k10-1.1.13
        component: compliance
        heritage: Tiller
        release: kasten-k10-1
        run: compliance-svc
    spec:
      containers:
      - env:
        - name: VERSION
          valueFrom:
            configMapKeyRef:
              key: version
              name: k10-config
        - name: CLUSTER_NAME
          valueFrom:
            configMapKeyRef:
              key: clustername
              name: k10-config
        - name: MODEL_STORE_DIR
          valueFrom:
            configMapKeyRef:
              key: modelstoredirname
              name: k10-config
        - name: AWS_FIREHOSE_DELIVERY_STREAM_NAME
          valueFrom:
            configMapKeyRef:
              key: firehosedeliverystreamname
              name: k10-config
        - name: LOG_LEVEL
          valueFrom:
            configMapKeyRef:
              key: loglevel
              name: k10-config
        - name: POD_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        image: gcr.io/kasten-cloudlauncher/k10/compliance:1.1
        imagePullPolicy: Always
        livenessProbe:
          httpGet:
            path: /v0/healthz
            port: 8000
          initialDelaySeconds: 90
          timeoutSeconds: 1
        name: compliance-svc
        ports:
        - containerPort: 8000
      - args:
        - tail
        - -f
        - /dev/null
        image: gcr.io/kasten-images/service-proxy:hash-bc17b40
        imagePullPolicy: Always
        name: proxy
      serviceAccountName: kasten-k10-1-serviceaccount.name-7664
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    component: credentials
    heritage: Tiller
    release: kasten-k10-1
  name: credentials-pv-claim
  namespace: apptest-80129e39
spec:
  accessModes:
  - ReadWriteOnce
  resources:
    requests:
      storage: 20Gi
---
apiVersion: apps/v1beta1
kind: Deployment
metadata:
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    component: credentials
    heritage: Tiller
    release: kasten-k10-1
  name: credentials-svc
  namespace: apptest-80129e39
  ownerReferences:
  - apiVersion: app.k8s.io/v1alpha1
    blockOwnerDeletion: true
    kind: Application
    name: kasten-k10-1
    uid: 7c9b0602-7f26-11e8-a573-42010a8a01a6
spec:
  replicas: 1
  strategy:
    type: Recreate
  template:
    metadata:
      labels:
        app: k10
        chart: k10-1.1.13
        component: credentials
        heritage: Tiller
        release: kasten-k10-1
        run: credentials-svc
    spec:
      containers:
      - env:
        - name: VERSION
          valueFrom:
            configMapKeyRef:
              key: version
              name: k10-config
        - name: CLUSTER_NAME
          valueFrom:
            configMapKeyRef:
              key: clustername
              name: k10-config
        - name: MODEL_STORE_DIR
          valueFrom:
            configMapKeyRef:
              key: modelstoredirname
              name: k10-config
        - name: AWS_FIREHOSE_DELIVERY_STREAM_NAME
          valueFrom:
            configMapKeyRef:
              key: firehosedeliverystreamname
              name: k10-config
        - name: LOG_LEVEL
          valueFrom:
            configMapKeyRef:
              key: loglevel
              name: k10-config
        - name: POD_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        image: gcr.io/kasten-cloudlauncher/k10/credentials:1.1
        imagePullPolicy: Always
        livenessProbe:
          httpGet:
            path: /v0/healthz
            port: 8000
          initialDelaySeconds: 90
          timeoutSeconds: 1
        name: credentials-svc
        ports:
        - containerPort: 8000
        volumeMounts:
        - mountPath: /mnt/k10state
          name: credentials-persistent-storage
      - args:
        - tail
        - -f
        - /dev/null
        image: gcr.io/kasten-images/service-proxy:hash-bc17b40
        imagePullPolicy: Always
        name: proxy
      serviceAccountName: kasten-k10-1-serviceaccount.name-7664
      volumes:
      - name: credentials-persistent-storage
        persistentVolumeClaim:
          claimName: credentials-pv-claim
---
apiVersion: apps/v1beta1
kind: Deployment
metadata:
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    component: executor
    heritage: Tiller
    release: kasten-k10-1
  name: executor-svc
  namespace: apptest-80129e39
  ownerReferences:
  - apiVersion: app.k8s.io/v1alpha1
    blockOwnerDeletion: true
    kind: Application
    name: kasten-k10-1
    uid: 7c9b0602-7f26-11e8-a573-42010a8a01a6
spec:
  replicas: 3
  strategy:
    type: Recreate
  template:
    metadata:
      labels:
        app: k10
        chart: k10-1.1.13
        component: executor
        heritage: Tiller
        release: kasten-k10-1
        run: executor-svc
    spec:
      containers:
      - env:
        - name: VERSION
          valueFrom:
            configMapKeyRef:
              key: version
              name: k10-config
        - name: CLUSTER_NAME
          valueFrom:
            configMapKeyRef:
              key: clustername
              name: k10-config
        - name: MODEL_STORE_DIR
          valueFrom:
            configMapKeyRef:
              key: modelstoredirname
              name: k10-config
        - name: AWS_FIREHOSE_DELIVERY_STREAM_NAME
          valueFrom:
            configMapKeyRef:
              key: firehosedeliverystreamname
              name: k10-config
        - name: LOG_LEVEL
          valueFrom:
            configMapKeyRef:
              key: loglevel
              name: k10-config
        - name: POD_NAMESPACE
          valueFrom:
            fieldRef:
+ kubectl apply --namespace=apptest-80129e39 --filename=/data/resources.yaml
              fieldPath: metadata.namespace
        image: gcr.io/kasten-cloudlauncher/k10/executor:1.1
        imagePullPolicy: Always
        livenessProbe:
          httpGet:
            path: /v0/healthz
            port: 8000
          initialDelaySeconds: 90
          timeoutSeconds: 1
        name: executor-svc
        ports:
        - containerPort: 8000
      - args:
        - tail
        - -f
        - /dev/null
        image: gcr.io/kasten-images/service-proxy:hash-bc17b40
        imagePullPolicy: Always
        name: proxy
      serviceAccountName: kasten-k10-1-serviceaccount.name-7664
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    component: jobs
    heritage: Tiller
    release: kasten-k10-1
  name: jobs-pv-claim
  namespace: apptest-80129e39
spec:
  accessModes:
  - ReadWriteOnce
  resources:
    requests:
      storage: 20Gi
---
apiVersion: apps/v1beta1
kind: Deployment
metadata:
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    component: jobs
    heritage: Tiller
    release: kasten-k10-1
  name: jobs-svc
  namespace: apptest-80129e39
  ownerReferences:
  - apiVersion: app.k8s.io/v1alpha1
    blockOwnerDeletion: true
    kind: Application
    name: kasten-k10-1
    uid: 7c9b0602-7f26-11e8-a573-42010a8a01a6
spec:
  replicas: 1
  strategy:
    type: Recreate
  template:
    metadata:
      labels:
        app: k10
        chart: k10-1.1.13
        component: jobs
        heritage: Tiller
        release: kasten-k10-1
        run: jobs-svc
    spec:
      containers:
      - env:
        - name: VERSION
          valueFrom:
            configMapKeyRef:
              key: version
              name: k10-config
        - name: CLUSTER_NAME
          valueFrom:
            configMapKeyRef:
              key: clustername
              name: k10-config
        - name: MODEL_STORE_DIR
          valueFrom:
            configMapKeyRef:
              key: modelstoredirname
              name: k10-config
        - name: AWS_FIREHOSE_DELIVERY_STREAM_NAME
          valueFrom:
            configMapKeyRef:
              key: firehosedeliverystreamname
              name: k10-config
        - name: LOG_LEVEL
          valueFrom:
            configMapKeyRef:
              key: loglevel
              name: k10-config
        - name: POD_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        image: gcr.io/kasten-cloudlauncher/k10/jobs:1.1
        imagePullPolicy: Always
        livenessProbe:
          httpGet:
            path: /v0/healthz
            port: 8000
          initialDelaySeconds: 90
          timeoutSeconds: 1
        name: jobs-svc
        ports:
        - containerPort: 8000
        volumeMounts:
        - mountPath: /mnt/k10state
          name: jobs-persistent-storage
      - args:
        - tail
        - -f
        - /dev/null
        image: gcr.io/kasten-images/service-proxy:hash-bc17b40
        imagePullPolicy: Always
        name: proxy
      serviceAccountName: kasten-k10-1-serviceaccount.name-7664
      volumes:
      - name: jobs-persistent-storage
        persistentVolumeClaim:
          claimName: jobs-pv-claim
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    component: jobsqueue
    heritage: Tiller
    release: kasten-k10-1
  name: jobsqueue-pv-claim
  namespace: apptest-80129e39
spec:
  accessModes:
  - ReadWriteOnce
  resources:
    requests:
      storage: 20Gi
---
apiVersion: apps/v1beta1
kind: Deployment
metadata:
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    component: jobsqueue
    heritage: Tiller
    release: kasten-k10-1
  name: jobsqueue-svc
  namespace: apptest-80129e39
  ownerReferences:
  - apiVersion: app.k8s.io/v1alpha1
    blockOwnerDeletion: true
    kind: Application
    name: kasten-k10-1
    uid: 7c9b0602-7f26-11e8-a573-42010a8a01a6
spec:
  replicas: 1
  strategy:
    type: Recreate
  template:
    metadata:
      labels:
        app: k10
        chart: k10-1.1.13
        component: jobsqueue
        heritage: Tiller
        release: kasten-k10-1
        run: jobsqueue-svc
    spec:
      containers:
      - env:
        - name: VERSION
          valueFrom:
            configMapKeyRef:
              key: version
              name: k10-config
        - name: CLUSTER_NAME
          valueFrom:
            configMapKeyRef:
              key: clustername
              name: k10-config
        - name: MODEL_STORE_DIR
          valueFrom:
            configMapKeyRef:
              key: modelstoredirname
              name: k10-config
        - name: AWS_FIREHOSE_DELIVERY_STREAM_NAME
          valueFrom:
            configMapKeyRef:
              key: firehosedeliverystreamname
              name: k10-config
        - name: LOG_LEVEL
          valueFrom:
            configMapKeyRef:
              key: loglevel
              name: k10-config
        - name: POD_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        image: gcr.io/kasten-cloudlauncher/k10/jobsqueue:1.1
        imagePullPolicy: Always
        livenessProbe:
          httpGet:
            path: /v0/healthz
            port: 8000
          initialDelaySeconds: 90
          timeoutSeconds: 1
        name: jobsqueue-svc
        ports:
        - containerPort: 8000
        volumeMounts:
        - mountPath: /mnt/k10state
          name: jobsqueue-persistent-storage
      - args:
        - tail
        - -f
        - /dev/null
        image: gcr.io/kasten-images/service-proxy:hash-bc17b40
        imagePullPolicy: Always
        name: proxy
      serviceAccountName: kasten-k10-1-serviceaccount.name-7664
      volumes:
      - name: jobsqueue-persistent-storage
        persistentVolumeClaim:
          claimName: jobsqueue-pv-claim
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    component: policies
    heritage: Tiller
    release: kasten-k10-1
  name: policies-pv-claim
  namespace: apptest-80129e39
spec:
  accessModes:
  - ReadWriteOnce
  resources:
    requests:
      storage: 20Gi
---
apiVersion: apps/v1beta1
kind: Deployment
metadata:
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    component: policies
    heritage: Tiller
    release: kasten-k10-1
  name: policies-svc
  namespace: apptest-80129e39
  ownerReferences:
  - apiVersion: app.k8s.io/v1alpha1
    blockOwnerDeletion: true
    kind: Application
    name: kasten-k10-1
    uid: 7c9b0602-7f26-11e8-a573-42010a8a01a6
spec:
  replicas: 1
  strategy:
    type: Recreate
  template:
    metadata:
      labels:
        app: k10
        chart: k10-1.1.13
        component: policies
        heritage: Tiller
        release: kasten-k10-1
        run: policies-svc
    spec:
      containers:
      - env:
        - name: VERSION
          valueFrom:
            configMapKeyRef:
              key: version
              name: k10-config
        - name: CLUSTER_NAME
          valueFrom:
            configMapKeyRef:
              key: clustername
              name: k10-config
        - name: MODEL_STORE_DIR
          valueFrom:
            configMapKeyRef:
              key: modelstoredirname
              name: k10-config
        - name: AWS_FIREHOSE_DELIVERY_STREAM_NAME
          valueFrom:
            configMapKeyRef:
              key: firehosedeliverystreamname
              name: k10-config
        - name: LOG_LEVEL
          valueFrom:
            configMapKeyRef:
              key: loglevel
              name: k10-config
        - name: POD_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        image: gcr.io/kasten-cloudlauncher/k10/policies:1.1
        imagePullPolicy: Always
        livenessProbe:
          httpGet:
            path: /v0/healthz
            port: 8000
          initialDelaySeconds: 90
          timeoutSeconds: 1
        name: policies-svc
        ports:
        - containerPort: 8000
        volumeMounts:
        - mountPath: /mnt/k10state
          name: policies-persistent-storage
      - args:
        - tail
        - -f
        - /dev/null
        image: gcr.io/kasten-images/service-proxy:hash-bc17b40
        imagePullPolicy: Always
        name: proxy
      serviceAccountName: kasten-k10-1-serviceaccount.name-7664
      volumes:
      - name: policies-persistent-storage
        persistentVolumeClaim:
          claimName: policies-pv-claim
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    component: profiles
    heritage: Tiller
    release: kasten-k10-1
  name: profiles-pv-claim
  namespace: apptest-80129e39
spec:
  accessModes:
  - ReadWriteOnce
  resources:
    requests:
      storage: 20Gi
---
apiVersion: apps/v1beta1
kind: Deployment
metadata:
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    component: profiles
    heritage: Tiller
    release: kasten-k10-1
  name: profiles-svc
  namespace: apptest-80129e39
  ownerReferences:
  - apiVersion: app.k8s.io/v1alpha1
    blockOwnerDeletion: true
    kind: Application
    name: kasten-k10-1
    uid: 7c9b0602-7f26-11e8-a573-42010a8a01a6
spec:
  replicas: 1
  strategy:
    type: Recreate
  template:
    metadata:
      labels:
        app: k10
        chart: k10-1.1.13
        component: profiles
        heritage: Tiller
        release: kasten-k10-1
        run: profiles-svc
    spec:
      containers:
      - env:
        - name: VERSION
          valueFrom:
            configMapKeyRef:
              key: version
              name: k10-config
        - name: CLUSTER_NAME
          valueFrom:
            configMapKeyRef:
              key: clustername
              name: k10-config
        - name: MODEL_STORE_DIR
          valueFrom:
            configMapKeyRef:
              key: modelstoredirname
              name: k10-config
        - name: AWS_FIREHOSE_DELIVERY_STREAM_NAME
          valueFrom:
            configMapKeyRef:
              key: firehosedeliverystreamname
              name: k10-config
        - name: LOG_LEVEL
          valueFrom:
            configMapKeyRef:
              key: loglevel
              name: k10-config
        - name: POD_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        image: gcr.io/kasten-cloudlauncher/k10/profiles:1.1
        imagePullPolicy: Always
        livenessProbe:
          httpGet:
            path: /v0/healthz
            port: 8000
          initialDelaySeconds: 90
          timeoutSeconds: 1
        name: profiles-svc
        ports:
        - containerPort: 8000
        volumeMounts:
        - mountPath: /mnt/k10state
          name: profiles-persistent-storage
      - args:
        - tail
        - -f
        - /dev/null
        image: gcr.io/kasten-images/service-proxy:hash-bc17b40
        imagePullPolicy: Always
        name: proxy
      serviceAccountName: kasten-k10-1-serviceaccount.name-7664
      volumes:
      - name: profiles-persistent-storage
        persistentVolumeClaim:
          claimName: profiles-pv-claim
---
apiVersion: apps/v1beta1
kind: Deployment
metadata:
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    component: scheduler
    heritage: Tiller
    release: kasten-k10-1
  name: scheduler-svc
  namespace: apptest-80129e39
  ownerReferences:
  - apiVersion: app.k8s.io/v1alpha1
    blockOwnerDeletion: true
    kind: Application
    name: kasten-k10-1
    uid: 7c9b0602-7f26-11e8-a573-42010a8a01a6
spec:
  replicas: 1
  strategy:
    type: Recreate
  template:
    metadata:
      labels:
        app: k10
        chart: k10-1.1.13
        component: scheduler
        heritage: Tiller
        release: kasten-k10-1
        run: scheduler-svc
    spec:
      containers:
      - env:
        - name: VERSION
          valueFrom:
            configMapKeyRef:
              key: version
              name: k10-config
        - name: CLUSTER_NAME
          valueFrom:
            configMapKeyRef:
              key: clustername
              name: k10-config
        - name: MODEL_STORE_DIR
          valueFrom:
            configMapKeyRef:
              key: modelstoredirname
              name: k10-config
        - name: AWS_FIREHOSE_DELIVERY_STREAM_NAME
          valueFrom:
            configMapKeyRef:
              key: firehosedeliverystreamname
              name: k10-config
        - name: LOG_LEVEL
          valueFrom:
            configMapKeyRef:
              key: loglevel
              name: k10-config
        - name: POD_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        image: gcr.io/kasten-cloudlauncher/k10/scheduler:1.1
        imagePullPolicy: Always
        livenessProbe:
          httpGet:
            path: /v0/healthz
            port: 8000
          initialDelaySeconds: 90
          timeoutSeconds: 1
        name: scheduler-svc
        ports:
        - containerPort: 8000
      - args:
        - tail
        - -f
        - /dev/null
        image: gcr.io/kasten-images/service-proxy:hash-bc17b40
        imagePullPolicy: Always
        name: proxy
      serviceAccountName: kasten-k10-1-serviceaccount.name-7664
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    component: schedules
    heritage: Tiller
    release: kasten-k10-1
  name: schedules-pv-claim
  namespace: apptest-80129e39
spec:
  accessModes:
  - ReadWriteOnce
  resources:
    requests:
      storage: 20Gi
---
apiVersion: apps/v1beta1
kind: Deployment
metadata:
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    component: schedules
    heritage: Tiller
    release: kasten-k10-1
  name: schedules-svc
  namespace: apptest-80129e39
  ownerReferences:
  - apiVersion: app.k8s.io/v1alpha1
    blockOwnerDeletion: true
    kind: Application
    name: kasten-k10-1
    uid: 7c9b0602-7f26-11e8-a573-42010a8a01a6
spec:
  replicas: 1
  strategy:
    type: Recreate
  template:
    metadata:
      labels:
        app: k10
        chart: k10-1.1.13
        component: schedules
        heritage: Tiller
        release: kasten-k10-1
        run: schedules-svc
    spec:
      containers:
      - env:
        - name: VERSION
          valueFrom:
            configMapKeyRef:
              key: version
              name: k10-config
        - name: CLUSTER_NAME
          valueFrom:
            configMapKeyRef:
              key: clustername
              name: k10-config
        - name: MODEL_STORE_DIR
          valueFrom:
            configMapKeyRef:
              key: modelstoredirname
              name: k10-config
        - name: AWS_FIREHOSE_DELIVERY_STREAM_NAME
          valueFrom:
            configMapKeyRef:
              key: firehosedeliverystreamname
              name: k10-config
        - name: LOG_LEVEL
          valueFrom:
            configMapKeyRef:
              key: loglevel
              name: k10-config
        - name: POD_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        image: gcr.io/kasten-cloudlauncher/k10/schedules:1.1
        imagePullPolicy: Always
        livenessProbe:
          httpGet:
            path: /v0/healthz
            port: 8000
          initialDelaySeconds: 90
          timeoutSeconds: 1
        name: schedules-svc
        ports:
        - containerPort: 8000
        volumeMounts:
        - mountPath: /mnt/k10state
          name: schedules-persistent-storage
      - args:
        - tail
        - -f
        - /dev/null
        image: gcr.io/kasten-images/service-proxy:hash-bc17b40
        imagePullPolicy: Always
        name: proxy
      serviceAccountName: kasten-k10-1-serviceaccount.name-7664
      volumes:
      - name: schedules-persistent-storage
        persistentVolumeClaim:
          claimName: schedules-pv-claim
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    component: state
    heritage: Tiller
    release: kasten-k10-1
  name: state-pv-claim
  namespace: apptest-80129e39
spec:
  accessModes:
  - ReadWriteOnce
  resources:
    requests:
      storage: 20Gi
---
apiVersion: apps/v1beta1
kind: Deployment
metadata:
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    component: state
    heritage: Tiller
    release: kasten-k10-1
  name: state-svc
  namespace: apptest-80129e39
  ownerReferences:
  - apiVersion: app.k8s.io/v1alpha1
    blockOwnerDeletion: true
    kind: Application
    name: kasten-k10-1
    uid: 7c9b0602-7f26-11e8-a573-42010a8a01a6
spec:
  replicas: 1
  strategy:
    type: Recreate
  template:
    metadata:
      labels:
        app: k10
        chart: k10-1.1.13
        component: state
        heritage: Tiller
        release: kasten-k10-1
        run: state-svc
    spec:
      containers:
      - env:
        - name: VERSION
          valueFrom:
            configMapKeyRef:
              key: version
              name: k10-config
        - name: CLUSTER_NAME
          valueFrom:
            configMapKeyRef:
              key: clustername
              name: k10-config
        - name: MODEL_STORE_DIR
          valueFrom:
            configMapKeyRef:
              key: modelstoredirname
              name: k10-config
        - name: AWS_FIREHOSE_DELIVERY_STREAM_NAME
          valueFrom:
            configMapKeyRef:
              key: firehosedeliverystreamname
              name: k10-config
        - name: LOG_LEVEL
          valueFrom:
            configMapKeyRef:
              key: loglevel
              name: k10-config
        - name: POD_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        image: gcr.io/kasten-cloudlauncher/k10/state:1.1
        imagePullPolicy: Always
        livenessProbe:
          httpGet:
            path: /v0/healthz
            port: 8000
          initialDelaySeconds: 90
          timeoutSeconds: 1
        name: state-svc
        ports:
        - containerPort: 8000
        volumeMounts:
        - mountPath: /mnt/k10state
          name: state-persistent-storage
      - args:
        - tail
        - -f
        - /dev/null
        image: gcr.io/kasten-images/service-proxy:hash-bc17b40
        imagePullPolicy: Always
        name: proxy
      serviceAccountName: kasten-k10-1-serviceaccount.name-7664
      volumes:
      - name: state-persistent-storage
        persistentVolumeClaim:
          claimName: state-pv-claim
---
apiVersion: apps/v1beta1
kind: Deployment
metadata:
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    component: dashboardbff
    heritage: Tiller
    release: kasten-k10-1
  name: dashboardbff-svc
  namespace: apptest-80129e39
  ownerReferences:
  - apiVersion: app.k8s.io/v1alpha1
    blockOwnerDeletion: true
    kind: Application
    name: kasten-k10-1
    uid: 7c9b0602-7f26-11e8-a573-42010a8a01a6
spec:
  replicas: 1
  strategy:
    type: Recreate
  template:
    metadata:
      labels:
        app: k10
        chart: k10-1.1.13
        component: dashboardbff
        heritage: Tiller
        release: kasten-k10-1
        run: dashboardbff-svc
    spec:
      containers:
      - env:
        - name: VERSION
          valueFrom:
            configMapKeyRef:
              key: version
              name: k10-config
        - name: CLUSTER_NAME
          valueFrom:
            configMapKeyRef:
              key: clustername
              name: k10-config
        - name: MODEL_STORE_DIR
          valueFrom:
            configMapKeyRef:
              key: modelstoredirname
              name: k10-config
        - name: AWS_FIREHOSE_DELIVERY_STREAM_NAME
          valueFrom:
            configMapKeyRef:
              key: firehosedeliverystreamname
              name: k10-config
        - name: LOG_LEVEL
          valueFrom:
            configMapKeyRef:
              key: loglevel
              name: k10-config
        - name: POD_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        image: gcr.io/kasten-cloudlauncher/k10/dashboardbff:1.1
        imagePullPolicy: Always
        livenessProbe:
          httpGet:
            path: /v0/healthz
            port: 8000
          initialDelaySeconds: 90
          timeoutSeconds: 1
        name: dashboardbff-svc
        ports:
        - containerPort: 8000
      - args:
        - tail
        - -f
        - /dev/null
        image: gcr.io/kasten-images/service-proxy:hash-bc17b40
        imagePullPolicy: Always
        name: proxy
      serviceAccountName: kasten-k10-1-serviceaccount.name-7664
---
apiVersion: v1
data:
  config: "identities:\n- name: gcp\n  gcp:\n    encodedServiceAccountKey: \nmetrics:\n\
    - name: nodes\n  type: int\n  endpoints:\n  - name: on_disk\n  - name: servicecontrol\n\
    \  aggregation:\n    bufferSeconds: 60\nendpoints:\n- name: on_disk\n  disk:\n\
    \    reportDir: /tmp/ubbagent/reports\n    expireSeconds: 3600\n- name: servicecontrol\n\
    \  servicecontrol:\n    identity: gcp\n    serviceName: k10.kasten.io\n    consumerId:\
    \ \n"
kind: ConfigMap
metadata:
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    heritage: Tiller
    release: kasten-k10-1
  name: kasten-k10-1-k10-metering-config
  namespace: apptest-80129e39
  ownerReferences:
  - apiVersion: app.k8s.io/v1alpha1
    blockOwnerDeletion: true
    kind: Application
    name: kasten-k10-1
    uid: 7c9b0602-7f26-11e8-a573-42010a8a01a6
---
apiVersion: apps/v1beta1
kind: Deployment
metadata:
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    component: metering
    heritage: Tiller
    release: kasten-k10-1
  name: metering-svc
  namespace: apptest-80129e39
  ownerReferences:
  - apiVersion: app.k8s.io/v1alpha1
    blockOwnerDeletion: true
    kind: Application
    name: kasten-k10-1
    uid: 7c9b0602-7f26-11e8-a573-42010a8a01a6
spec:
  replicas: 1
  strategy:
    type: Recreate
  template:
    metadata:
      labels:
        app: k10
        chart: k10-1.1.13
        component: metering
        heritage: Tiller
        release: kasten-k10-1
        run: metering-svc
    spec:
      containers:
      - env:
        - name: VERSION
          valueFrom:
            configMapKeyRef:
              key: version
              name: k10-config
        - name: CLUSTER_NAME
          valueFrom:
            configMapKeyRef:
              key: clustername
              name: k10-config
        - name: AWS_FIREHOSE_DELIVERY_STREAM_NAME
          valueFrom:
            configMapKeyRef:
              key: firehosedeliverystreamname
              name: k10-config
        - name: LOG_LEVEL
          valueFrom:
            configMapKeyRef:
              key: loglevel
              name: k10-config
        - name: POD_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        - name: AGENT_CONFIG_FILE
          value: /var/ubbagent/config.yaml
        - name: AGENT_STATE_DIR
          value: /tmp/ubbagent
        - name: AGENT_CONSUMER_ID
          valueFrom:
            secretKeyRef:
              key: consumer-id
              name: reportingSecret
        - name: AGENT_REPORTING_KEY
          valueFrom:
            secretKeyRef:
              key: reporting-key
              name: reportingSecret
        image: gcr.io/kasten-cloudlauncher/k10/metering:1.1
        imagePullPolicy: Always
        livenessProbe:
          httpGet:
            path: /v0/healthz
            port: 8000
          initialDelaySeconds: 90
          timeoutSeconds: 1
        name: metering-svc
        ports:
        - containerPort: 8000
        volumeMounts:
        - mountPath: /var/ubbagent
          name: meter-config
      - args:
        - tail
        - -f
        - /dev/null
        image: gcr.io/kasten-images/service-proxy:hash-bc17b40
        imagePullPolicy: Always
        name: proxy
      serviceAccountName: kasten-k10-1-serviceaccount.name-7664
      volumes:
      - configMap:
          items:
          - key: config
            path: config.yaml
          name: kasten-k10-1-k10-metering-config
        name: meter-config
---
apiVersion: apps/v1beta1
kind: Deployment
metadata:
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    component: frontend
    heritage: Tiller
    release: kasten-k10-1
  name: frontend-svc
  namespace: apptest-80129e39
  ownerReferences:
  - apiVersion: app.k8s.io/v1alpha1
    blockOwnerDeletion: true
    kind: Application
    name: kasten-k10-1
    uid: 7c9b0602-7f26-11e8-a573-42010a8a01a6
spec:
  replicas: 1
  strategy:
    type: Recreate
  template:
    metadata:
      labels:
        app: k10
        chart: k10-1.1.13
        component: frontend
        heritage: Tiller
        release: kasten-k10-1
        run: frontend-svc
    spec:
      containers:
      - env:
        - name: VERSION
          valueFrom:
            configMapKeyRef:
              key: version
              name: k10-config
        - name: CLUSTER_NAME
          valueFrom:
            configMapKeyRef:
              key: clustername
              name: k10-config
        - name: MODEL_STORE_DIR
          valueFrom:
            configMapKeyRef:
              key: modelstoredirname
              name: k10-config
        - name: AWS_FIREHOSE_DELIVERY_STREAM_NAME
          valueFrom:
            configMapKeyRef:
              key: firehosedeliverystreamname
              name: k10-config
        - name: LOG_LEVEL
          valueFrom:
            configMapKeyRef:
              key: loglevel
              name: k10-config
        - name: POD_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        image: gcr.io/kasten-cloudlauncher/k10/frontend:1.1
        imagePullPolicy: Always
        livenessProbe:
          httpGet:
            path: /v0/healthz
            port: 8000
          initialDelaySeconds: 90
          timeoutSeconds: 1
        name: frontend-svc
        ports:
        - containerPort: 8000
      - args:
        - tail
        - -f
        - /dev/null
        image: gcr.io/kasten-images/service-proxy:hash-bc17b40
        imagePullPolicy: Always
        name: proxy
      serviceAccountName: kasten-k10-1-serviceaccount.name-7664
---
apiVersion: apps/v1beta1
kind: Deployment
metadata:
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    component: kanister
    heritage: Tiller
    release: kasten-k10-1
  name: kanister-svc
  namespace: apptest-80129e39
  ownerReferences:
  - apiVersion: app.k8s.io/v1alpha1
    blockOwnerDeletion: true
    kind: Application
    name: kasten-k10-1
    uid: 7c9b0602-7f26-11e8-a573-42010a8a01a6
spec:
  replicas: 1
  strategy:
    type: Recreate
  template:
    metadata:
      labels:
        app: k10
        chart: k10-1.1.13
        component: kanister
        heritage: Tiller
        release: kasten-k10-1
        run: kanister-svc
    spec:
      containers:
      - env:
        - name: VERSION
          valueFrom:
            configMapKeyRef:
              key: version
              name: k10-config
        - name: CLUSTER_NAME
          valueFrom:
            configMapKeyRef:
              key: clustername
              name: k10-config
        - name: MODEL_STORE_DIR
          valueFrom:
            configMapKeyRef:
              key: modelstoredirname
              name: k10-config
        - name: AWS_FIREHOSE_DELIVERY_STREAM_NAME
          valueFrom:
            configMapKeyRef:
              key: firehosedeliverystreamname
              name: k10-config
        - name: LOG_LEVEL
          valueFrom:
            configMapKeyRef:
              key: loglevel
              name: k10-config
        - name: POD_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        image: gcr.io/kasten-cloudlauncher/k10/kanister:1.1
        imagePullPolicy: Always
        livenessProbe:
          httpGet:
            path: /v0/healthz
            port: 8000
          initialDelaySeconds: 90
          timeoutSeconds: 1
        name: kanister-svc
        ports:
        - containerPort: 8000
      - args:
        - tail
        - -f
        - /dev/null
        image: gcr.io/kasten-images/service-proxy:hash-bc17b40
        imagePullPolicy: Always
        name: proxy
      serviceAccountName: kasten-k10-1-serviceaccount.name-7664
---
apiVersion: extensions/v1beta1
kind: Ingress
metadata:
  annotations:
    kubernetes.io/ingress.class: nginx
    nginx.ingress.kubernetes.io/ssl-redirect: 'false'
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    heritage: Tiller
    release: kasten-k10-1
  name: kasten-k10-1-ingress
  namespace: apptest-80129e39
  ownerReferences:
  - apiVersion: app.k8s.io/v1alpha1
    blockOwnerDeletion: true
    kind: Application
    name: kasten-k10-1
    uid: 7c9b0602-7f26-11e8-a573-42010a8a01a6
spec:
  rules:
  - http:
      paths:
      - backend:
          serviceName: ambassador
          servicePort: http
        path: /kasten-k10-1/
---
apiVersion: app.k8s.io/v1alpha1
kind: Application
metadata:
  annotations:
    kubernetes-engine.cloud.google.com/icon: data:image/png;base64,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
  labels:
    app.kubernetes.io/name: kasten-k10-1
  name: kasten-k10-1
  namespace: apptest-80129e39
spec:
  componentKinds:
  - group: apps/v1beta2
    kind: Deployment
  - group: v1
    kind: PersistentVolumeClaim
  - group: v1
    kind: Service
  - group: v1
    kind: Secret
  - group: extensions/v1beta1
    kind: Ingress
  - group: v1
    kind: ConfigMap
  - group: networking.k8s.io/v1
    kind: NetworkPolicy
  description: "Kasten\u2019s K10 data lifecycle management system"
  links:
  - description: Getting Started
    url: https://docs.kasten.io/quickstart.html
  maintainers:
  - name: Google Click to Deploy
    url: https://cloud.google.com/solutions/#click-to-deploy
  - email: info@kasten.io
    name: Kasten
    url: https://kasten.io/
  selector:
    matchLabels:
      app.kubernetes.io/name: kasten-k10-1
  versions: 1.1.13
---
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    heritage: Tiller
    release: kasten-k10-1
  name: default-deny
  namespace: apptest-80129e39
  ownerReferences:
  - apiVersion: app.k8s.io/v1alpha1
    blockOwnerDeletion: true
    kind: Application
    name: kasten-k10-1
    uid: 7c9b0602-7f26-11e8-a573-42010a8a01a6
spec:
  podSelector: {}
  policyTypes:
  - Ingress
---
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    heritage: Tiller
    release: kasten-k10-1
  name: cross-services-allow
  namespace: apptest-80129e39
  ownerReferences:
  - apiVersion: app.k8s.io/v1alpha1
    blockOwnerDeletion: true
    kind: Application
    name: kasten-k10-1
    uid: 7c9b0602-7f26-11e8-a573-42010a8a01a6
spec:
  ingress:
  - from:
    - podSelector:
        matchLabels:
          release: kasten-k10-1
    ports:
    - port: 8000
      protocol: TCP
    - port: 9000
      protocol: TCP
    - port: 80
      protocol: TCP
  podSelector:
    matchLabels:
      release: kasten-k10-1
---
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    heritage: Tiller
    release: kasten-k10-1
  name: fluentd-allow-services
  namespace: apptest-80129e39
  ownerReferences:
  - apiVersion: app.k8s.io/v1alpha1
    blockOwnerDeletion: true
    kind: Application
    name: kasten-k10-1
    uid: 7c9b0602-7f26-11e8-a573-42010a8a01a6
spec:
  ingress:
  - from:
    - podSelector:
        matchLabels:
          release: kasten-k10-1
    ports:
    - port: 24220
      protocol: TCP
    - port: 24224
      protocol: TCP
  podSelector:
    matchLabels:
      app: fluentd
      release: kasten-k10-1
---
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  labels:
    app: k10
    app.kubernetes.io/name: kasten-k10-1
    chart: k10-1.1.13
    heritage: Tiller
    release: kasten-k10-1
  name: allow-external
  namespace: apptest-80129e39
  ownerReferences:
  - apiVersion: app.k8s.io/v1alpha1
    blockOwnerDeletion: true
    kind: Application
    name: kasten-k10-1
    uid: 7c9b0602-7f26-11e8-a573-42010a8a01a6
spec:
  ingress:
  - from: []
    ports:
    - port: 80
    - port: 443
  podSelector:
    matchLabels:
      release: kasten-k10-1
      service: ambassador
secret "k10-api-key" created
configmap "fluentd" created
configmap "k10-config" created
configmap "kasten-k10-1-k10-prometheus-config" created
persistentvolumeclaim "fluentd" created
persistentvolumeclaim "kasten-k10-1-prometheus-server" created
serviceaccount "kasten-k10-1-prometheus-server" created
service "fluentd" created
service "kasten-k10-1-prometheus-server" created
service "ambassador" created
deployment "ambassador" created
service "api-policies" created
service "api-profiles" created
service "kasten-k10-1-prometheus-server-exp" created
service "auth-svc" created
service "catalog-svc" created
service "compliance-svc" created
service "credentials-svc" created
service "executor-svc" created
service "jobs-svc" created
service "jobsqueue-svc" created
service "policies-svc" created
service "profiles-svc" created
service "scheduler-svc" created
service "schedules-svc" created
service "state-svc" created
service "dashboardbff-svc" created
service "frontend-svc" created
deployment "fluentd" created
deployment "kasten-k10-1-prometheus-server" created
deployment "api-policies-svc" created
deployment "api-profiles-svc" created
deployment "auth-svc" created
persistentvolumeclaim "catalog-pv-claim" created
deployment "catalog-svc" created
deployment "compliance-svc" created
persistentvolumeclaim "credentials-pv-claim" created
deployment "credentials-svc" created
deployment "executor-svc" created
persistentvolumeclaim "jobs-pv-claim" created
deployment "jobs-svc" created
persistentvolumeclaim "jobsqueue-pv-claim" created
deployment "jobsqueue-svc" created
persistentvolumeclaim "policies-pv-claim" created
deployment "policies-svc" created
persistentvolumeclaim "profiles-pv-claim" created
deployment "profiles-svc" created
deployment "scheduler-svc" created
persistentvolumeclaim "schedules-pv-claim" created
deployment "schedules-svc" created
persistentvolumeclaim "state-pv-claim" created
deployment "state-svc" created
deployment "dashboardbff-svc" created
configmap "kasten-k10-1-k10-metering-config" created
deployment "frontend-svc" created
deployment "kanister-svc" created
ingress "kasten-k10-1-ingress" created
application "kasten-k10-1" configured
networkpolicy "default-deny" created
networkpolicy "cross-services-allow" created
networkpolicy "fluentd-allow-services" created
networkpolicy "allow-external" created
The Deployment "metering-svc" is invalid: 
* spec.template.spec.containers[0].env[7].valueFrom.secretKeyRef.name: Invalid value: "reportingSecret": a DNS-1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')
* spec.template.spec.containers[0].env[8].valueFrom.secretKeyRef.name: Invalid value: "reportingSecret": a DNS-1123 subdomain must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')
INFO Deleting namespace "apptest-80129e39"
namespace "apptest-80129e39" deleted
